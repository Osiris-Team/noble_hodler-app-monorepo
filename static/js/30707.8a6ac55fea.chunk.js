"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[30707],{714718:(e,t,r)=>{r.d(t,{A:()=>useFormatDate});var n=r(514041),a=r(243915),o=r(152111),i=r(724726),s=r(584941),l=r(121684),c=r(232585),u=r(769059),f=r(830885),d=r(209730),m=r(411887),h=r(886738),parseLocal=function(e){switch(e){case"zh-CN":return c.A;case"en-US":default:return u.A;case"zh-HK":return f.A;case"ja-JP":return d.A;case"ko-KR":return m.A}};function useFormatDate(){var e=(0,h.L)(),t=(0,n.useCallback)((function(t,r){var n;n="string"==typeof t?(0,a.A)(t):t;try{return(0,o.A)(n,null!=r?r:"PPp",{locale:parseLocal(e)})}catch(e){return"-"}}),[e]),r=(0,n.useCallback)((function(r,n){var o,i;i="string"==typeof r?(0,a.A)(r):r;var s=(new Date).getFullYear(),l=(new Date).getMonth(),c="yyyy/LL/dd, HH:mm";return["de","es","en-US","fr-FR","it-IT","uk-UA"].includes(e)&&(c="LL/dd/yyyy, HH:mm"),(s===i.getFullYear()&&n?.hideTheYear||n?.hideYear)&&(c=(c=c.replace("yyyy/","")).replace("/yyyy","")),(l===i.getMonth()&&n?.hideTheMonth||n?.hideMonth)&&(c=c.replace("LL/","")),n?.hideTimeForever&&(c=c.replace(", HH:mm","")),n?.onlyTime&&(c="HH:mm"),null!=(o=t(i,c))?o:""}),[t,e]),c=(0,n.useCallback)((function(e,r){var n,o,i;return o="string"==typeof e?(0,a.A)(e):e,(new Date).getFullYear()===o.getFullYear()&&r?.hideTheYear||r?.hideYear?null!=(i=t(o,"MMMM"))?i:"":null!=(n=t(o,"MMMM, yyyy"))?n:""}),[t]),u=(0,n.useCallback)((function(t,r){var n;return null!=(n=(0,i.A)(t,r,{locale:parseLocal(e)}))?n:""}),[e]),f=(0,n.useCallback)((function(t){var r;return null!=(r=(0,s.A)(t,{addSuffix:!0,locale:parseLocal(e)}))?r:""}),[e]),d=(0,n.useCallback)((function(t){var r;return null!=(r=(0,l.A)(t,{locale:parseLocal(e)}))?r:""}),[e]);return(0,n.useMemo)((function(){return{format:t,formatDate:r,formatMonth:c,formatDistanceToNow:f,formatDuration:d,formatDistanceStrict:u}}),[t,r,c,f,d,u])}},130707:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var n=r(579071),a=r.n(n),o=r(324586),i=r(839850),s=r(586330),l=r(514041),c=r(908867),u=r(490343),f=r(259227),d=r(254491),m=r(392097),h=r(17245),v=r(610421),g=r(791088),y=r(498356),b=r(714718),A=r(911998),p=r(831085),D=["item"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function HeaderRight(){var e=(0,c.A)(),t=(0,y.A)(),r=(0,l.useCallback)((function(){t.pushModal(m.ry.SettingModal,{screen:m.Pj.SettingNotifications})}),[t]);return(0,p.jsxs)(u.HeaderButtonGroup,{children:[(0,p.jsx)(u.HeaderIconButton,{icon:"BroomOutline",onPress:function(){var t;u.Dialog.show({icon:"BroomOutline",title:e.formatMessage({id:d.ETranslations.global_mark_all_as_confirmation_title}),description:e.formatMessage({id:d.ETranslations.global_mark_all_as_confirmation_desc}),onConfirm:(t=(0,s.A)((function*(){yield v.A.serviceNotification.markNotificationReadAll()})),function onConfirm(){return t.apply(this,arguments)})})}}),(0,p.jsx)(u.HeaderIconButton,{icon:"SettingsOutline",onPress:r})]})}function NotificationItem(e){var{item:t}=e,r=(0,i.A)(e,D),{formatDistanceToNow:n}=(0,b.A)(),{title:a,content:o}=t.body,{createdAt:s,readed:l,msgId:c}=t,[{badge:d}]=(0,f.useNotificationsAtom)(),[m]=(0,f.useNotificationsReadedAtom)();return(0,p.jsxs)(g.c,_objectSpread(_objectSpread({gap:"$1",flexDirection:"column",alignItems:"stretch",userSelect:"none",hoverStyle:{bg:"$bgHover"}},r),{},{children:[(0,p.jsxs)(u.XStack,{alignItems:"baseline",gap:"$3",children:[(0,p.jsx)(u.SizableText,{flex:1,size:"$headingSm",numberOfLines:1,children:a}),(0,p.jsx)(u.SizableText,{size:"$bodySm",color:"$textSubdued",flexShrink:0,children:n(new Date(s))})]}),(0,p.jsxs)(u.XStack,{children:[(0,p.jsx)(u.XStack,{flex:1,children:(0,p.jsx)(u.SizableText,{size:"$bodyMd",flex:1,maxWidth:"$96",children:o})}),l||!d||m?.[c]?null:(0,p.jsx)(u.Stack,{m:"$1.5",borderRadius:"$full",bg:"$bgCriticalStrong",w:"$2",h:"$2"})]})]}))}const x=function NotificationList(){var e=(0,c.A)(),t=(0,y.A)(),r=(0,l.useCallback)((function(){return(0,p.jsx)(HeaderRight,{})}),[]),[{lastReceivedTime:n}]=(0,f.useNotificationsAtom)(),{result:o=[],isLoading:i}=(0,A.yk)((0,s.A)((function*(){return a()(n),v.A.serviceNotification.refreshBadgeFromServer(),yield v.A.serviceNotification.fetchMessageList()})),[n],{watchLoading:!0});return(0,p.jsxs)(u.Page,{scrollEnabled:!0,children:[(0,p.jsx)(u.Page.Header,{title:e.formatMessage({id:d.ETranslations.global_notifications}),headerRight:r}),(0,p.jsx)(u.Page.Body,{children:i&&!o?.length?(0,p.jsx)(u.Stack,{pt:240,justifyContent:"center",alignItems:"center",children:(0,p.jsx)(u.Spinner,{size:"large"})}):(0,p.jsxs)(p.Fragment,{children:[o?.length?null:(0,p.jsx)(u.Empty,{title:e.formatMessage({id:d.ETranslations.global_no_data})}),o.map((function(e,r){return(0,p.jsx)(NotificationItem,_objectSpread(_objectSpread({item:e},0!==r&&{mt:"$1.5"}),{},{onPress:function(){h.A.navigateToNotificationDetail({navigation:t,message:e.body,notificationId:e?.msgId||e?.body?.extras?.params?.msgId||e?.body?.extras?.msgId||""})}}),r)}))]})})]})}},405405:(e,t,r)=>{function assign(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}r.d(t,{A:()=>assign})},639794:(e,t,r)=>{r.d(t,{A:()=>cloneObject});var n=r(405405);function cloneObject(e){return(0,n.A)({},e)}},724726:(e,t,r)=>{r.d(t,{A:()=>formatDistanceStrict});var n=r(766017),a=r(57641),o=r(247803),i=r(95286),s=r(639794),l=r(405405),c=r(372231),u=r(981092),f=6e4,d=1440,m=30*d,h=365*d;function formatDistanceStrict(e,t,r){var v,g,y;(0,u.A)(2,arguments);var b=(0,n.q)(),A=null!==(v=null!==(g=null==r?void 0:r.locale)&&void 0!==g?g:b.locale)&&void 0!==v?v:c.A;if(!A.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var p=(0,o.A)(e,t);if(isNaN(p))throw new RangeError("Invalid time value");var D,x,S=(0,l.A)((0,s.A)(r),{addSuffix:Boolean(null==r?void 0:r.addSuffix),comparison:p});p>0?(D=(0,i.A)(t),x=(0,i.A)(e)):(D=(0,i.A)(e),x=(0,i.A)(t));var w,M=String(null!==(y=null==r?void 0:r.roundingMethod)&&void 0!==y?y:"round");if("floor"===M)w=Math.floor;else if("ceil"===M)w=Math.ceil;else{if("round"!==M)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");w=Math.round}var j,T=x.getTime()-D.getTime(),k=T/f,O=(T-((0,a.A)(x)-(0,a.A)(D)))/f,N=null==r?void 0:r.unit;if("second"===(j=N?String(N):k<1?"second":k<60?"minute":k<d?"hour":O<m?"day":O<h?"month":"year")){var H=w(T/1e3);return A.formatDistance("xSeconds",H,S)}if("minute"===j){var P=w(k);return A.formatDistance("xMinutes",P,S)}if("hour"===j){var _=w(k/60);return A.formatDistance("xHours",_,S)}if("day"===j){var C=w(O/d);return A.formatDistance("xDays",C,S)}if("month"===j){var E=w(O/m);return 12===E&&"month"!==N?A.formatDistance("xYears",1,S):A.formatDistance("xMonths",E,S)}if("year"===j){var I=w(O/h);return A.formatDistance("xYears",I,S)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}},584941:(e,t,r)=>{r.d(t,{A:()=>formatDistanceToNow});var n=r(766017),a=r(247803),o=r(28268),i=r(847245),s=r(981092),l=r(362622);var c=r(372231),u=r(95286),f=r(639794),d=r(405405),m=r(57641),h=1440,v=2520,g=43200,y=86400;function formatDistance(e,t,r){var b,A;(0,s.A)(2,arguments);var p=(0,n.q)(),D=null!==(b=null!==(A=null==r?void 0:r.locale)&&void 0!==A?A:p.locale)&&void 0!==b?b:c.A;if(!D.formatDistance)throw new RangeError("locale must contain formatDistance property");var x=(0,a.A)(e,t);if(isNaN(x))throw new RangeError("Invalid time value");var S,w,M=(0,d.A)((0,f.A)(r),{addSuffix:Boolean(null==r?void 0:r.addSuffix),comparison:x});x>0?(S=(0,u.A)(t),w=(0,u.A)(e)):(S=(0,u.A)(e),w=(0,u.A)(t));var j,T=function differenceInSeconds(e,t,r){(0,s.A)(2,arguments);var n=(0,i.A)(e,t)/1e3;return(0,l.u)(null==r?void 0:r.roundingMethod)(n)}(w,S),k=((0,m.A)(w)-(0,m.A)(S))/1e3,O=Math.round((T-k)/60);if(O<2)return null!=r&&r.includeSeconds?T<5?D.formatDistance("lessThanXSeconds",5,M):T<10?D.formatDistance("lessThanXSeconds",10,M):T<20?D.formatDistance("lessThanXSeconds",20,M):T<40?D.formatDistance("halfAMinute",0,M):T<60?D.formatDistance("lessThanXMinutes",1,M):D.formatDistance("xMinutes",1,M):0===O?D.formatDistance("lessThanXMinutes",1,M):D.formatDistance("xMinutes",O,M);if(O<45)return D.formatDistance("xMinutes",O,M);if(O<90)return D.formatDistance("aboutXHours",1,M);if(O<h){var N=Math.round(O/60);return D.formatDistance("aboutXHours",N,M)}if(O<v)return D.formatDistance("xDays",1,M);if(O<g){var H=Math.round(O/h);return D.formatDistance("xDays",H,M)}if(O<y)return j=Math.round(O/g),D.formatDistance("aboutXMonths",j,M);if((j=(0,o.A)(w,S))<12){var P=Math.round(O/g);return D.formatDistance("xMonths",P,M)}var _=j%12,C=Math.floor(j/12);return _<3?D.formatDistance("aboutXYears",C,M):_<9?D.formatDistance("overXYears",C,M):D.formatDistance("almostXYears",C+1,M)}function formatDistanceToNow(e,t){return(0,s.A)(1,arguments),formatDistance(e,Date.now(),t)}},121684:(e,t,r)=>{r.d(t,{A:()=>formatDuration});var n=r(766017),a=r(372231),o=["years","months","weeks","days","hours","minutes","seconds"];function formatDuration(e,t){var r,i,s,l,c;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var u=(0,n.q)(),f=null!==(r=null!==(i=null==t?void 0:t.locale)&&void 0!==i?i:u.locale)&&void 0!==r?r:a.A,d=null!==(s=null==t?void 0:t.format)&&void 0!==s?s:o,m=null!==(l=null==t?void 0:t.zero)&&void 0!==l&&l,h=null!==(c=null==t?void 0:t.delimiter)&&void 0!==c?c:" ";return f.formatDistance?d.reduce((function(t,r){var n="x".concat(r.replace(/(^.)/,(function(e){return e.toUpperCase()}))),a=e[r];return"number"==typeof a&&(m||e[r])?t.concat(f.formatDistance(n,a)):t}),[]).join(h):""}}}]);