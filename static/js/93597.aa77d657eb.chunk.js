"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[93597],{802172:(e,t,r)=>{r.d(t,{m:()=>l});var n=r(324586),a=r(514041),i=r(2577),s=r(597102),o=r(310944),c=r(907481),u=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=(0,a.memo)((function(e){var{children:t,storeName:r}=e,n=(0,c.z)(r),a=i.A.getOrCreateStore(n);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.H,_objectSpread({},n)),(0,u.jsx)(o.Hn,{store:a,children:t})]})}));l.displayName="MarketWatchListProviderMirror"},172120:(e,t,r)=>{r.d(t,{J:()=>m});var n=r(324586),a=r(839850),i=r(514041),s=r(908867),o=r(490343),c=r(153763),u=r(318822),l=r(254491),d=r(450255),p=r(831085),h=["coingeckoId","size","tabIndex"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var m=(0,i.memo)((function BasicMarketStar(e){var{coingeckoId:t,size:r,tabIndex:m}=e,f=(0,a.A)(e,h),b=(0,s.A)(),j=(0,d.B)(),[k,g]=(0,i.useState)((function(){return j.isInWatchList(t)})),y=(0,c.E)(),{gtMd:x}=(0,o.useMedia)(),S=(0,i.useCallback)((function({tabIndex:e}){e===m&&g(j.isInWatchList(t))}),[j,t,m]);(0,i.useEffect)((function(){if(x&&m)return u.iL.on(u.Tu.SwitchMarketHomeTab,S),function(){u.iL.off(u.Tu.SwitchMarketHomeTab,S)}}),[x,S,m]),(0,i.useEffect)((function(){y&&g(j.isInWatchList(t))}),[j,t,y]);var v=(0,i.useCallback)((function(){k?j.removeFormWatchList(t):j.addIntoWatchList(t),g(!k)}),[j,t,k]);return(0,p.jsx)(o.IconButton,function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:b.formatMessage({id:k?l.ETranslations.market_remove_from_watchlist:l.ETranslations.market_add_to_watchlist}),icon:k?"StarSolid":"StarOutline",variant:"tertiary",size:r,iconSize:r?void 0:"$5",iconProps:{color:k?"$iconActive":"$iconDisabled"},onPress:v},f))}))},202338:(e,t,r)=>{r.d(t,{t:()=>s});var n=r(514041),a=r(490343),i=r(831085);var s=(0,n.memo)((function BasicMarketTokenIcon({uri:e,size:t}){return e?(0,i.jsxs)(a.Image,{size:t,circular:!0,children:[(0,i.jsx)(a.Image.Source,{source:{uri:decodeURIComponent(e)}}),(0,i.jsx)(a.Image.Fallback,{children:(0,i.jsx)(a.Stack,{bg:"$bgStrong",ai:"center",jc:"center",width:"100%",height:"100%",children:(0,i.jsx)(a.Icon,{name:"CoinOutline",size:"$6",color:"$iconSubdued"})})}),(0,i.jsx)(a.Image.Loading,{children:(0,i.jsx)(a.Skeleton,{width:"100%",height:"100%",radius:"round"})})]}):(0,i.jsx)(a.Skeleton,{width:t,height:t})}))},378302:(e,t,r)=>{r.d(t,{D:()=>MarketTokenPrice,u:()=>useTokenPrice});var n=r(230414),a=r(514041),i=r(490343),s=r(259227),o=r(831085),c=new(function(){function MarketTokenPriceEvent(){this.tokenPriceMap=new Map,this.priceChangedListenerMap=new Map}var e=MarketTokenPriceEvent.prototype;return e.buildKey=function buildKey(e,t){return`${e}-${t}`},e.updateTokenPrice=function updateTokenPrice({name:e,symbol:t,price:r,lastUpdated:n}){var a=this.buildKey(e,t),{lastUpdated:i=0}=this.tokenPriceMap.get(e)||{};n>i&&(this.tokenPriceMap.set(a,{price:r,lastUpdated:n}),(this.priceChangedListenerMap.get(a)||[]).forEach((function(e){return e()})))},e.getTokenPrice=function getTokenPrice(e,t){var r=this.buildKey(e,t);return this.tokenPriceMap.get(r)?.price||"-"},e.onPriceChange=function onPriceChange(e,t,r){var n=this,a=this.buildKey(e,t),i=this.priceChangedListenerMap.get(a)||[];return i.push(r),this.priceChangedListenerMap.set(a,i),function(){var e=n.priceChangedListenerMap.get(a)||[];n.priceChangedListenerMap.set(a,e.filter((function(e){return e!==r})))}},(0,n.A)(MarketTokenPriceEvent)}()),useTokenPrice=function({name:e,symbol:t,price:r,lastUpdated:n}){var[i,s]=(0,a.useState)(0);return(0,a.useMemo)((function(){c.updateTokenPrice({name:e,symbol:t,price:r,lastUpdated:n})}),[n,e,r,t]),(0,a.useLayoutEffect)((function(){return c.onPriceChange(e,t,(function(){s((function(e){return e+1}))}))}),[n,e,r,t]),(0,a.useMemo)((function(){return c.getTokenPrice(e,t)}),[e,t,i])};function MarketTokenPrice({price:e,tokenName:t,tokenSymbol:r,lastUpdated:n,size:c}){var[u]=(0,s.useSettingsPersistAtom)(),l=u.currencyInfo.symbol,d=(0,a.useMemo)((function(){return n?new Date(n).getTime():Date.now()}),[n]),p=useTokenPrice({name:t,price:e,symbol:r,lastUpdated:d});return(0,o.jsx)(i.NumberSizeableText,{userSelect:"none",formatter:"price",size:c,formatterOptions:{currency:l},children:p})}},450255:(e,t,r)=>{r.d(t,{B:()=>useWatchListAction});var n=r(514041),a=r(908867),i=r(490343),s=r(254491),o=r(310944),useWatchListAction=function(){var e=(0,a.A)(),t=(0,o.qr)(),r=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.removeFormWatchList(r)}),[t]),c=(0,n.useCallback)((function(r){var n=Array.isArray(r)?r:[r];t.current.addIntoWatchList(n.map((function(e){return{coingeckoId:e}}))),i.Toast.success({title:e.formatMessage({id:s.ETranslations.market_added_to_watchlist})})}),[t,e]),u=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.moveToTop(r)}),[t]),l=(0,n.useCallback)((function(e){return t.current.isInWatchList(e)}),[t]);return(0,n.useMemo)((function(){return{removeFormWatchList:r,addIntoWatchList:c,MoveToTop:u,isInWatchList:l}}),[u,c,l,r])}},493597:(e,t,r)=>{r.r(t),r.d(t,{UniversalSearch:()=>UniversalSearch,default:()=>pages_UniversalSearch});var n=r(586330),a=r(514041),i=r(908867),s=r(578104),o=r(490343),c=r(958227),u=r(259227),l=r(254491),d=r(392097),p=r(491180),h=r(714191),m=r(506851),f=r(610421),b=r(325809),j=r(791088),k=r(880590),g=r(498356),y=r(162616),x=r(826339),S=r(172120),v=r(202338),T=r(378302),w=r(802172),O=r(831085);function SearchTextItem({item:e,onPress:t}){var r=(0,a.useCallback)((function(){t(e)}),[e,t]);return(0,O.jsx)(o.Stack,{ai:"center",jc:"center",borderRadius:"$2",gap:"$3",bg:"$bgStrong",mt:"$3",cursor:"pointer",onPress:r,children:(0,O.jsx)(o.SizableText,{px:"$2.5",py:"$1",size:"$bodyMdMedium",children:e.text})})}function RecentSearched({searchType:e}){var t,r=(0,i.A)(),[{recentSearch:s}]=(0,c.O6)(),u=(0,c.GW)(),p=(0,g.A)(),h=(0,a.useCallback)((t=(0,n.A)((function*(e){e.type===m.j.MarketToken&&(p.pop(),setTimeout((function(){p.push(d.FE.MarketDetail,{token:e.id})}),80))})),function(e){return t.apply(this,arguments)}),[p]),f=(0,a.useCallback)((function(){u.current.clearAllRecentSearch()}),[u]);return s.length&&e===m.j.MarketToken?(0,O.jsxs)(o.YStack,{px:"$5",pb:"$5",children:[(0,O.jsxs)(o.XStack,{jc:"space-between",pt:"$5",children:[(0,O.jsx)(o.SizableText,{size:"$headingSm",color:"$textSubdued",children:r.formatMessage({id:l.ETranslations.global_recent_searched})}),(0,O.jsx)(o.IconButton,{variant:"tertiary",icon:"DeleteOutline",color:"$textSubdued",iconSize:"$5",onPress:f})]}),(0,O.jsx)(o.XStack,{flexWrap:"wrap",gap:"$3",children:s.map((function(e){return(0,O.jsx)(SearchTextItem,{onPress:h,item:e},e.text)}))})]}):(0,O.jsx)(o.XStack,{pt:"$5"})}var P=r(324586),M=r(2577),$=r(597102),I=r(526039);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,P.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=(0,a.memo)((function(e){var{children:t,storeName:r}=e,n=(0,I.f)(r),a=M.A.getOrCreateStore(n);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)($.H,_objectSpread({},n)),(0,O.jsx)(c.TG,{store:a,children:t})]})}));A.displayName="UniversalSearchProviderMirror";var C=function(e){return e.init="init",e.loading="loading",e.done="done",e}(C||{}),SkeletonItem=function(){return(0,O.jsxs)(o.XStack,{py:"$2",alignItems:"center",children:[(0,O.jsx)(o.Skeleton,{w:"$10",h:"$10",radius:"round"}),(0,O.jsxs)(o.YStack,{ml:"$3",children:[(0,O.jsx)(o.Stack,{py:"$1.5",children:(0,O.jsx)(o.Skeleton,{h:"$3",w:"$32"})}),(0,O.jsx)(o.Stack,{py:"$1.5",children:(0,O.jsx)(o.Skeleton,{h:"$3",w:"$24"})})]})]})};function ListEmptyComponent({searchType:e}){var t=(0,i.A)();return e===m.j.MarketToken?(0,O.jsxs)(o.YStack,{px:"$5",children:[(0,O.jsx)(o.SizableText,{numberOfLines:1,size:"$headingSm",color:"$textSubdued",children:t.formatMessage({id:l.ETranslations.market_trending})}),(0,O.jsx)(SkeletonItem,{}),(0,O.jsx)(SkeletonItem,{}),(0,O.jsx)(SkeletonItem,{})]}):null}function UniversalSearch({searchType:e}){var t=(0,i.A)(),r=(0,g.A)(),{activeAccount:u}=(0,y.LH)({num:0}),h=(0,c.GW)(),[b,w]=(0,a.useState)([]),[P,M]=(0,a.useState)(C.init),[$,I]=(0,a.useState)([]),A=(0,a.useMemo)((function(){return t.formatMessage({id:e===m.j.MarketToken?l.ETranslations.global_search_tokens:l.ETranslations.global_search})}),[t,e]),E=(0,a.useCallback)((0,n.A)((function*(){var r=[],n=yield f.A.serviceUniversalSearch.universalSearchRecommend({searchTypes:e?[e]:[]});n?.[m.j.MarketToken]?.items&&r.push({title:t.formatMessage({id:l.ETranslations.market_trending}),data:n?.[m.j.MarketToken]?.items}),I(r)})),[t,e]);(0,a.useEffect)((function(){E()}),[E]);var L,_=(0,s.YQ)((L=(0,n.A)((function*(t){var r=t?.trim?.()||"";if(r){var n=yield f.A.serviceUniversalSearch.universalSearch({input:r,networkId:u?.network?.id,searchTypes:[e||m.j.Address]}),a=[];n?.[m.j.Address]?.items?.length&&a.push({title:"Wallet",data:n?.[m.j.Address]?.items}),n?.[m.j.MarketToken]?.items?.length&&a.push({title:"Market Token",data:n?.[m.j.MarketToken]?.items}),w(a),M(C.done)}else M(C.init)})),function(e){return L.apply(this,arguments)}),1200),z=(0,a.useCallback)((function(){M(C.loading)}),[]),D=(0,a.useCallback)((function({section:t}){return e===m.j.MarketToken?(0,O.jsx)(o.SizableText,{px:"$5",pb:0,size:"$headingSm",color:"$textSubdued",children:t.title}):(0,O.jsx)(o.SizableText,{px:"$5",pb:0,size:"$headingSm",children:t.title})}),[e]),U=(0,a.useCallback)((function({item:e}){switch(e.type){case m.j.Address:var t=e;return(0,O.jsx)(j.c,{onPress:function(){r.pop(),setTimeout((0,n.A)((function*(){var{network:e,addressInfo:n}=t.payload;yield x.Jh.pushUrlAccountPage(r,{address:n.displayAddress,networkId:e.id,contextNetworkId:u?.network?.id})})),80)},renderAvatar:(0,O.jsx)(k.um,{networkId:t.payload.network.id,size:"$10"}),title:t.payload.network.shortname,subtitle:p.A.shortenAddress({address:t.payload.addressInfo.displayAddress})});case m.j.MarketToken:var{image:a,coingeckoId:i,price:s,symbol:c,name:l,lastUpdated:f}=e.payload;return(0,O.jsx)(j.c,{jc:"space-between",onPress:(0,n.A)((function*(){r.pop(),setTimeout((0,n.A)((function*(){r.push(d.FE.MarketDetail,{token:i}),setTimeout((function(){h.current.addIntoRecentSearchList({id:i,text:c.toUpperCase(),type:e.type,timestamp:Date.now()})}),10)})),80)})),renderAvatar:(0,O.jsx)(v.t,{uri:a,size:"$10"}),title:c.toUpperCase(),subtitle:l,subtitleProps:{numberOfLines:1},children:(0,O.jsxs)(o.XStack,{children:[(0,O.jsx)(T.D,{price:String(s),size:"$bodyLgMedium",lastUpdated:f,tokenName:l,tokenSymbol:c}),(0,O.jsx)(S.J,{coingeckoId:i,ml:"$3"})]})});default:return null}}),[r,u?.network?.id,h]),W=(0,a.useCallback)((function(){switch(P){case C.init:return(0,O.jsx)(o.SectionList,{renderSectionHeader:D,sections:$,renderItem:U,ListHeaderComponent:(0,O.jsx)(RecentSearched,{searchType:e}),ListEmptyComponent:(0,O.jsx)(ListEmptyComponent,{searchType:e}),estimatedItemSize:"$16"});case C.loading:return(0,O.jsxs)(o.YStack,{px:"$5",pt:"$5",children:[(0,O.jsx)(SkeletonItem,{}),(0,O.jsx)(SkeletonItem,{}),(0,O.jsx)(SkeletonItem,{})]});case C.done:return(0,O.jsx)(o.SectionList,{mt:"$5",sections:b,ListEmptyComponent:(0,O.jsx)(o.Empty,{icon:"SearchOutline",title:t.formatMessage({id:l.ETranslations.global_no_results}),description:t.formatMessage({id:l.ETranslations.global_search_no_results_desc})}),renderItem:U,estimatedItemSize:"$16"})}}),[t,$,U,D,P,e,b]);return(0,O.jsxs)(o.Page,{children:[(0,O.jsx)(o.Page.Header,{title:t.formatMessage({id:l.ETranslations.global_search})}),(0,O.jsxs)(o.Page.Body,{children:[(0,O.jsx)(o.View,{px:"$5",children:(0,O.jsx)(o.SearchBar,{autoFocus:!0,placeholder:A,onSearchTextChange:_,onChangeText:z})}),W()]})]})}const pages_UniversalSearch=function({route:e}){return(0,O.jsx)(b.b8,{config:{sceneName:h.Zs.home,sceneUrl:""},enabledNum:[0],children:(0,O.jsx)(w.m,{storeName:u.EJotaiContextStoreNames.marketWatchList,children:(0,O.jsx)(A,{storeName:u.EJotaiContextStoreNames.universalSearch,children:(0,O.jsx)(UniversalSearch,{searchType:e?.params?.filterType||m.j.Address})})})})}}}]);