"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[64448],{714718:(e,t,r)=>{r.d(t,{A:()=>useFormatDate});var n=r(514041),a=r(243915),o=r(152111),s=r(724726),i=r(584941),l=r(121684),u=r(232585),c=r(769059),d=r(830885),f=r(209730),m=r(411887),h=r(886738),parseLocal=function(e){switch(e){case"zh-CN":return u.A;case"en-US":default:return c.A;case"zh-HK":return d.A;case"ja-JP":return f.A;case"ko-KR":return m.A}};function useFormatDate(){var e=(0,h.L)(),t=(0,n.useCallback)((function(t,r){var n;n="string"==typeof t?(0,a.A)(t):t;try{return(0,o.A)(n,null!=r?r:"PPp",{locale:parseLocal(e)})}catch(e){return"-"}}),[e]),r=(0,n.useCallback)((function(r,n){var o,s;s="string"==typeof r?(0,a.A)(r):r;var i=(new Date).getFullYear(),l=(new Date).getMonth(),u="yyyy/LL/dd, HH:mm";return["de","es","en-US","fr-FR","it-IT","uk-UA"].includes(e)&&(u="LL/dd/yyyy, HH:mm"),(i===s.getFullYear()&&n?.hideTheYear||n?.hideYear)&&(u=(u=u.replace("yyyy/","")).replace("/yyyy","")),(l===s.getMonth()&&n?.hideTheMonth||n?.hideMonth)&&(u=u.replace("LL/","")),n?.hideTimeForever&&(u=u.replace(", HH:mm","")),n?.onlyTime&&(u="HH:mm"),null!=(o=t(s,u))?o:""}),[t,e]),u=(0,n.useCallback)((function(e,r){var n,o,s;return o="string"==typeof e?(0,a.A)(e):e,(new Date).getFullYear()===o.getFullYear()&&r?.hideTheYear||r?.hideYear?null!=(s=t(o,"MMMM"))?s:"":null!=(n=t(o,"MMMM, yyyy"))?n:""}),[t]),c=(0,n.useCallback)((function(t,r){var n;return null!=(n=(0,s.A)(t,r,{locale:parseLocal(e)}))?n:""}),[e]),d=(0,n.useCallback)((function(t){var r;return null!=(r=(0,i.A)(t,{addSuffix:!0,locale:parseLocal(e)}))?r:""}),[e]),f=(0,n.useCallback)((function(t){var r;return null!=(r=(0,l.A)(t,{locale:parseLocal(e)}))?r:""}),[e]);return(0,n.useMemo)((function(){return{format:t,formatDate:r,formatMonth:u,formatDistanceToNow:d,formatDuration:f,formatDistanceStrict:c}}),[t,r,u,d,f,c])}},664448:(e,t,r)=>{r.r(t),r.d(t,{default:()=>modal_SwapHistoryListModal});var n=r(586330),a=r(514041),o=r(908867),s=r(490343),i=r(610421),l=r(791088),u=r(498356),c=r(714718),d=r(911998),f=r(259227),m=r(254491),h=r(628380),g=r(619390),x=r(391944),y=r(831085),SwapTxHistoryAvatar=function({fromUri:e,toUri:t}){return(0,y.jsxs)(s.Stack,{w:"$10",h:"$10",alignItems:"flex-end",justifyContent:"flex-end",children:[(0,y.jsx)(s.Stack,{position:"absolute",left:"$0",top:"$0",children:(0,y.jsx)(x.o,{size:"sm",tokenImageUri:e})}),(0,y.jsx)(s.Stack,{borderWidth:2,borderColor:"$bgApp",borderRadius:"$full",zIndex:1,children:(0,y.jsx)(x.o,{size:"sm",tokenImageUri:t})})]})};const components_SwapTxHistoryListCell=function({item:e,onClickCell:t}){var r,n,i=(0,o.A)(),{formatDate:u}=(0,c.A)(),d=(0,a.useMemo)((function(){return e.status===g.lr.FAILED?(0,y.jsx)(s.Badge,{badgeType:"critical",badgeSize:"lg",children:i.formatMessage({id:m.ETranslations.swap_history_status_failed})}):e.status===g.lr.CANCELED?(0,y.jsx)(s.Badge,{badgeType:"warning",badgeSize:"lg",children:i.formatMessage({id:m.ETranslations.swap_history_status_canceled})}):e.status===g.lr.CANCELING?(0,y.jsx)(s.Badge,{badgeType:"warning",badgeSize:"lg",children:i.formatMessage({id:m.ETranslations.swap_history_status_cancelling})}):null}),[i,e.status]),f=(0,a.useMemo)((function(){var{created:t}=e.date,r=u(new Date(t),{hideYear:!0,onlyTime:e.status!==g.lr.PENDING&&e.status!==g.lr.CANCELING});return(0,y.jsxs)(s.XStack,{gap:"$2",children:[(0,y.jsx)(s.SizableText,{size:"$bodyMd",color:"$textSubdued",children:r}),d]})}),[u,e.date,e.status,d]),h=(0,a.useMemo)((function(){return(0,y.jsxs)(s.XStack,{alignItems:"center",gap:"$1",flex:1,flexWrap:"wrap",children:[(0,y.jsx)(s.SizableText,{size:"$bodyLgMedium",flexShrink:1,numberOfLines:1,children:e.baseInfo.fromToken.symbol.toUpperCase()}),(0,y.jsx)(s.Icon,{name:"ArrowRightOutline",size:"$5",color:"$iconSubdued"}),(0,y.jsx)(s.SizableText,{size:"$bodyLgMedium",flexShrink:1,numberOfLines:1,children:e.baseInfo.toToken.symbol.toUpperCase()})]})}),[e.baseInfo.fromToken.symbol,e.baseInfo.toToken.symbol]);return(0,y.jsxs)(l.c,{onPress:t,userSelect:"none",renderAvatar:(0,y.jsx)(SwapTxHistoryAvatar,{fromUri:null!=(r=e.baseInfo.fromToken.logoURI)?r:"",toUri:null!=(n=e.baseInfo.toToken.logoURI)?n:""}),children:[(0,y.jsx)(l.c.Text,{flex:1,primary:h,secondary:f}),(0,y.jsx)(l.c.Text,{align:"right",flexShrink:0,primary:(0,y.jsxs)(s.SizableText,{color:"$textSuccess",children:["+",(0,y.jsx)(s.NumberSizeableText,{color:"$textSuccess",formatter:"balance",children:e.baseInfo.toAmount})," ",(0,y.jsx)(s.SizableText,{color:"$textSuccess",children:e.baseInfo.toToken.symbol.toUpperCase()})]}),primaryTextProps:{color:"$textSuccess"},secondary:(0,y.jsxs)(s.SizableText,{textAlign:"right",size:"$bodyMd",color:"$textSubdued",children:["-",(0,y.jsx)(s.NumberSizeableText,{formatter:"balance",size:"$bodyMd",color:"$textSubdued",children:e.baseInfo.fromAmount})," ",(0,y.jsx)(s.SizableText,{size:"$bodyMd",color:"$textSubdued",children:e.baseInfo.fromToken.symbol.toUpperCase()})]})})]})};const modal_SwapHistoryListModal=function(){var e=(0,o.A)(),[{swapHistoryPendingList:t}]=(0,f.useInAppNotificationAtom)(),{result:r,isLoading:x}=(0,d.yk)((0,n.A)((function*(){return yield i.A.serviceSwap.fetchSwapHistoryListFromSimple()})),[t],{watchLoading:!0}),b=(0,u.A)(),{formatDate:p}=(0,c.A)(),v=(0,a.useMemo)((function(){var t,n,a=null!=(t=r?.filter((function(e){return e.status===g.lr.PENDING||e.status===g.lr.CANCELING})))?t:[],o=(null!=(n=r?.filter((function(e){return e.status!==g.lr.PENDING&&e.status!==g.lr.CANCELING})))?n:[]).reduce((function(e,t){var r=new Date(t.date.created),n=p(r,{hideTimeForever:!0,hideYear:!0});return e[n]||(e[n]=[]),e[n].push(t),e}),{}),s=Object.entries(o).map((function([e,t]){return{title:e,data:t}}));return a.length>0&&(s=[{title:e.formatMessage({id:m.ETranslations.swap_history_status_pending}),status:g.lr.PENDING,data:a},...s]),s}),[p,e,r]),A=(0,a.useCallback)((function(){r?.length&&s.Dialog.show({description:e.formatMessage({id:m.ETranslations.swap_history_all_history_content}),title:e.formatMessage({id:m.ETranslations.swap_history_all_history_title}),onConfirm:function(){i.A.serviceSwap.cleanSwapHistoryItems()},onConfirmText:e.formatMessage({id:m.ETranslations.global_clear}),onCancelText:e.formatMessage({id:m.ETranslations.global_cancel})})}),[e,r?.length]),D=(0,a.useCallback)((function(){r?.some((function(e){return e.status===g.lr.PENDING}))&&s.Dialog.show({description:e.formatMessage({id:m.ETranslations.swap_history_pending_history_content}),title:e.formatMessage({id:m.ETranslations.swap_history_pending_history_title}),onConfirm:function(){i.A.serviceSwap.cleanSwapHistoryItems([g.lr.PENDING])},onConfirmText:e.formatMessage({id:m.ETranslations.global_clear}),onCancelText:e.formatMessage({id:m.ETranslations.global_cancel})})}),[e,r]),S=(0,a.useCallback)((function(){return(0,y.jsx)(s.ActionList,{title:e.formatMessage({id:m.ETranslations.global_clear}),items:[{label:e.formatMessage({id:m.ETranslations.swap_history_pending_history}),onPress:D},{label:e.formatMessage({id:m.ETranslations.swap_history_all_history}),onPress:A}],renderTrigger:(0,y.jsx)(s.Button,{variant:"tertiary",children:e.formatMessage({id:m.ETranslations.global_clear})})})}),[e,A,D]),T=(0,a.useCallback)((function({item:e}){return(0,y.jsx)(components_SwapTxHistoryListCell,{item:e,onClickCell:function(){b.push(h.u.SwapHistoryDetail,{txHistory:e})}})}),[b]);return(0,y.jsxs)(s.Page,{children:[(0,y.jsx)(s.Page.Header,{headerRight:S}),x?Array.from({length:5}).map((function(e,t){return(0,y.jsxs)(l.c,{children:[(0,y.jsx)(s.Skeleton,{w:"$10",h:"$10",radius:"round"}),(0,y.jsxs)(s.YStack,{children:[(0,y.jsx)(s.YStack,{py:"$1",children:(0,y.jsx)(s.Skeleton,{h:"$4",w:"$32"})}),(0,y.jsx)(s.YStack,{py:"$1",children:(0,y.jsx)(s.Skeleton,{h:"$3",w:"$24"})})]})]},t)})):(0,y.jsx)(s.SectionList,{renderItem:T,sections:v,py:"$1",renderSectionHeader:function({section:{title:e,status:t}}){return(0,y.jsxs)(s.XStack,{px:"$5",py:"$2",gap:"$3",alignItems:"center",children:[t===g.lr.PENDING?(0,y.jsx)(s.Stack,{w:"$2",h:"$2",backgroundColor:"$textCaution",borderRadius:"$full"}):null,(0,y.jsx)(s.Heading,{size:"$headingSm",color:t===g.lr.PENDING?"$textCaution":"$textSubdued",children:e})]})},estimatedItemSize:"$10",ListEmptyComponent:(0,y.jsx)(s.Empty,{icon:"InboxOutline",title:e.formatMessage({id:m.ETranslations.global_no_results})})})]})}},405405:(e,t,r)=>{function assign(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}r.d(t,{A:()=>assign})},639794:(e,t,r)=>{r.d(t,{A:()=>cloneObject});var n=r(405405);function cloneObject(e){return(0,n.A)({},e)}},724726:(e,t,r)=>{r.d(t,{A:()=>formatDistanceStrict});var n=r(766017),a=r(57641),o=r(247803),s=r(95286),i=r(639794),l=r(405405),u=r(372231),c=r(981092),d=6e4,f=1440,m=30*f,h=365*f;function formatDistanceStrict(e,t,r){var g,x,y;(0,c.A)(2,arguments);var b=(0,n.q)(),p=null!==(g=null!==(x=null==r?void 0:r.locale)&&void 0!==x?x:b.locale)&&void 0!==g?g:u.A;if(!p.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var v=(0,o.A)(e,t);if(isNaN(v))throw new RangeError("Invalid time value");var A,D,S=(0,l.A)((0,i.A)(r),{addSuffix:Boolean(null==r?void 0:r.addSuffix),comparison:v});v>0?(A=(0,s.A)(t),D=(0,s.A)(e)):(A=(0,s.A)(e),D=(0,s.A)(t));var T,M=String(null!==(y=null==r?void 0:r.roundingMethod)&&void 0!==y?y:"round");if("floor"===M)T=Math.floor;else if("ceil"===M)T=Math.ceil;else{if("round"!==M)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");T=Math.round}var w,j=D.getTime()-A.getTime(),k=j/d,C=(j-((0,a.A)(D)-(0,a.A)(A)))/d,$=null==r?void 0:r.unit;if("second"===(w=$?String($):k<1?"second":k<60?"minute":k<f?"hour":C<m?"day":C<h?"month":"year")){var E=T(j/1e3);return p.formatDistance("xSeconds",E,S)}if("minute"===w){var I=T(k);return p.formatDistance("xMinutes",I,S)}if("hour"===w){var _=T(k/60);return p.formatDistance("xHours",_,S)}if("day"===w){var N=T(C/f);return p.formatDistance("xDays",N,S)}if("month"===w){var z=T(C/m);return 12===z&&"month"!==$?p.formatDistance("xYears",1,S):p.formatDistance("xMonths",z,S)}if("year"===w){var L=T(C/h);return p.formatDistance("xYears",L,S)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}},584941:(e,t,r)=>{r.d(t,{A:()=>formatDistanceToNow});var n=r(766017),a=r(247803),o=r(28268),s=r(847245),i=r(981092),l=r(362622);var u=r(372231),c=r(95286),d=r(639794),f=r(405405),m=r(57641),h=1440,g=2520,x=43200,y=86400;function formatDistance(e,t,r){var b,p;(0,i.A)(2,arguments);var v=(0,n.q)(),A=null!==(b=null!==(p=null==r?void 0:r.locale)&&void 0!==p?p:v.locale)&&void 0!==b?b:u.A;if(!A.formatDistance)throw new RangeError("locale must contain formatDistance property");var D=(0,a.A)(e,t);if(isNaN(D))throw new RangeError("Invalid time value");var S,T,M=(0,f.A)((0,d.A)(r),{addSuffix:Boolean(null==r?void 0:r.addSuffix),comparison:D});D>0?(S=(0,c.A)(t),T=(0,c.A)(e)):(S=(0,c.A)(e),T=(0,c.A)(t));var w,j=function differenceInSeconds(e,t,r){(0,i.A)(2,arguments);var n=(0,s.A)(e,t)/1e3;return(0,l.u)(null==r?void 0:r.roundingMethod)(n)}(T,S),k=((0,m.A)(T)-(0,m.A)(S))/1e3,C=Math.round((j-k)/60);if(C<2)return null!=r&&r.includeSeconds?j<5?A.formatDistance("lessThanXSeconds",5,M):j<10?A.formatDistance("lessThanXSeconds",10,M):j<20?A.formatDistance("lessThanXSeconds",20,M):j<40?A.formatDistance("halfAMinute",0,M):j<60?A.formatDistance("lessThanXMinutes",1,M):A.formatDistance("xMinutes",1,M):0===C?A.formatDistance("lessThanXMinutes",1,M):A.formatDistance("xMinutes",C,M);if(C<45)return A.formatDistance("xMinutes",C,M);if(C<90)return A.formatDistance("aboutXHours",1,M);if(C<h){var $=Math.round(C/60);return A.formatDistance("aboutXHours",$,M)}if(C<g)return A.formatDistance("xDays",1,M);if(C<x){var E=Math.round(C/h);return A.formatDistance("xDays",E,M)}if(C<y)return w=Math.round(C/x),A.formatDistance("aboutXMonths",w,M);if((w=(0,o.A)(T,S))<12){var I=Math.round(C/x);return A.formatDistance("xMonths",I,M)}var _=w%12,N=Math.floor(w/12);return _<3?A.formatDistance("aboutXYears",N,M):_<9?A.formatDistance("overXYears",N,M):A.formatDistance("almostXYears",N+1,M)}function formatDistanceToNow(e,t){return(0,i.A)(1,arguments),formatDistance(e,Date.now(),t)}},121684:(e,t,r)=>{r.d(t,{A:()=>formatDuration});var n=r(766017),a=r(372231),o=["years","months","weeks","days","hours","minutes","seconds"];function formatDuration(e,t){var r,s,i,l,u;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var c=(0,n.q)(),d=null!==(r=null!==(s=null==t?void 0:t.locale)&&void 0!==s?s:c.locale)&&void 0!==r?r:a.A,f=null!==(i=null==t?void 0:t.format)&&void 0!==i?i:o,m=null!==(l=null==t?void 0:t.zero)&&void 0!==l&&l,h=null!==(u=null==t?void 0:t.delimiter)&&void 0!==u?u:" ";return d.formatDistance?f.reduce((function(t,r){var n="x".concat(r.replace(/(^.)/,(function(e){return e.toUpperCase()}))),a=e[r];return"number"==typeof a&&(m||e[r])?t.concat(d.formatDistance(n,a)):t}),[]).join(h):""}}}]);