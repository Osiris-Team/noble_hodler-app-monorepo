"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[78234],{304695:(e,t,r)=>{r.d(t,{V:()=>NetworksFilterItem});var n=r(324586),o=r(839850),i=r(17617),a=r(490343),s=r(831085),l=["networkImageUri","networkName","isSelected","tooltipContent","disabled"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NetworksFilterItem(e){var{networkImageUri:t,networkName:r,isSelected:n,tooltipContent:c,disabled:d}=e,u=(0,o.A)(e,l),m=(0,s.jsxs)(a.XStack,_objectSpread(_objectSpread(_objectSpread(_objectSpread({justifyContent:"center",px:"$3",py:"$1.5",borderRadius:"$2",userSelect:"none",borderWidth:i.A.hairlineWidth,borderColor:n?"$borderActive":"$border"},!n&&!d&&{focusable:!0,hoverStyle:{bg:"$bgStrongHover"},pressStyle:{bg:"$bgStrongActive"},focusVisibleStyle:{outlineWidth:2,outlineStyle:"solid",outlineColor:"$focusRing"}}),d&&{opacity:.5}),u),{},{children:[t?(0,s.jsx)(a.Image,{height:"$6",width:"$6",borderRadius:"$full",$gtMd:{height:"$5",width:"$5"},children:(0,s.jsx)(a.Image.Source,{source:{uri:t}})}):null,r?(0,s.jsx)(a.SizableText,{numberOfLines:1,color:n?"$textOnColor":"$textSubdued",size:"$bodyLgMedium",$gtMd:{size:"$bodyMdMedium"},children:r}):null]}));return c?(0,s.jsx)(a.Tooltip,{renderContent:c,placement:"top",renderTrigger:m}):m}},793437:(e,t,r)=>{r.d(t,{X:()=>OpenInAppButton});var n=r(586330),o=r(514041),i=r(908867),a=r(17617),s=r(490343),l=r(889949),c=r(726130),d=r(254491),u=r(663522),m=r(117746),h=r(911998),f=r(831085);function OpenInAppButton({buildDeepLinkUrl:e,buildFullUrl:t}){var r=(0,i.A)(),{result:b}=(0,h.yk)((0,n.A)((function*(){var t=e();return(yield m.Ay.linkingCanOpenURL(t))?t:""})),[e]),p=((0,o.useMemo)((function(){return u.Ay.isWebMobile?u.Ay.isWebMobileAndroid?"Open by OneKey Android":u.Ay.isWebMobileIOS?"Open by OneKey iOS":void 0:"Open by OneKey Desktop"}),[]),(0,o.useCallback)((0,n.A)((function*(){var e=yield t();s.Dialog.show({title:r.formatMessage({id:d.ETranslations.open_in_mobile_app}),floatingPanelProps:{overflow:"hidden"},renderContent:(0,f.jsxs)(s.Stack,{children:[(0,f.jsx)(s.Stack,{alignItems:"center",justifyContent:"center",overflow:"hidden",children:(0,f.jsx)(s.Stack,{p:"$4",borderRadius:"$6",borderCurve:"continuous",borderWidth:a.A.hairlineWidth,borderColor:"$borderSubdued",children:(0,f.jsx)(s.QRCode,{value:e,logo:l,logoSize:40,size:224})})}),(0,f.jsxs)(s.XStack,{m:"$-5",mt:"$5",py:"$4",px:"$5",backgroundColor:"$bgSubdued",alignItems:"center",children:[(0,f.jsx)(s.SizableText,{size:"$bodyMd",color:"$textSubdued",flex:1,children:r.formatMessage({id:d.ETranslations.dont_have_mobile_app_yet})}),(0,f.jsx)(s.Button,{size:"small",onPress:function(){(0,m.Dr)(c.A8)},children:r.formatMessage({id:d.ETranslations.global_download})})]})]}),showFooter:!1})})),[t,r]));return(0,f.jsx)(s.Button,{size:"small",onPress:p,children:r.formatMessage({id:d.ETranslations.open_in_mobile_app})})}},714718:(e,t,r)=>{r.d(t,{A:()=>useFormatDate});var n=r(514041),o=r(243915),i=r(152111),a=r(724726),s=r(584941),l=r(121684),c=r(232585),d=r(769059),u=r(830885),m=r(209730),h=r(411887),f=r(886738),parseLocal=function(e){switch(e){case"zh-CN":return c.A;case"en-US":default:return d.A;case"zh-HK":return u.A;case"ja-JP":return m.A;case"ko-KR":return h.A}};function useFormatDate(){var e=(0,f.L)(),t=(0,n.useCallback)((function(t,r){var n;n="string"==typeof t?(0,o.A)(t):t;try{return(0,i.A)(n,null!=r?r:"PPp",{locale:parseLocal(e)})}catch(e){return"-"}}),[e]),r=(0,n.useCallback)((function(r,n){var i,a;a="string"==typeof r?(0,o.A)(r):r;var s=(new Date).getFullYear(),l=(new Date).getMonth(),c="yyyy/LL/dd, HH:mm";return["de","es","en-US","fr-FR","it-IT","uk-UA"].includes(e)&&(c="LL/dd/yyyy, HH:mm"),(s===a.getFullYear()&&n?.hideTheYear||n?.hideYear)&&(c=(c=c.replace("yyyy/","")).replace("/yyyy","")),(l===a.getMonth()&&n?.hideTheMonth||n?.hideMonth)&&(c=c.replace("LL/","")),n?.hideTimeForever&&(c=c.replace(", HH:mm","")),n?.onlyTime&&(c="HH:mm"),null!=(i=t(a,c))?i:""}),[t,e]),c=(0,n.useCallback)((function(e,r){var n,i,a;return i="string"==typeof e?(0,o.A)(e):e,(new Date).getFullYear()===i.getFullYear()&&r?.hideTheYear||r?.hideYear?null!=(a=t(i,"MMMM"))?a:"":null!=(n=t(i,"MMMM, yyyy"))?n:""}),[t]),d=(0,n.useCallback)((function(t,r){var n;return null!=(n=(0,a.A)(t,r,{locale:parseLocal(e)}))?n:""}),[e]),u=(0,n.useCallback)((function(t){var r;return null!=(r=(0,s.A)(t,{addSuffix:!0,locale:parseLocal(e)}))?r:""}),[e]),m=(0,n.useCallback)((function(t){var r;return null!=(r=(0,l.A)(t,{locale:parseLocal(e)}))?r:""}),[e]);return(0,n.useMemo)((function(){return{format:t,formatDate:r,formatMonth:c,formatDistanceToNow:u,formatDuration:m,formatDistanceStrict:d}}),[t,r,c,u,m,d])}},878234:(e,t,r)=>{r.r(t),r.d(t,{default:()=>MarketDetailWithProvider});var n=r(324586),o=r(586330),i=r(514041),a=r(654266),s=r(908867),l=r(490343),c=r(259227),d=r(211129),u=r(254491),m=r(663522),h=r(392097),f=r(796151),b=r(610421),p=r(793437),x=r(498356),g=r(954393),k=r(241440),j=r(839850),S=r(831085),y=["children"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=6;function ViewMoreText(e){var{children:t}=e,r=(0,j.A)(e,y),n=(0,s.A)(),[o,a]=(0,i.useState)(0),[c,d]=(0,i.useState)(v),m=(0,i.useRef)(0),h=(0,i.useCallback)((function({nativeEvent:{layout:{height:e}}}){m.current||(m.current=e,a((function(e){return e+1})))}),[]),f=(0,i.useRef)(0),b=(0,i.useCallback)((function({nativeEvent:{layout:{height:e}}}){f.current||(f.current=e),a((function(e){return e+1}))}),[]),p=f.current<m.current,x=(0,i.useCallback)((function(){d((function(e){return e?void 0:v}))}),[]),g=o<2;return(0,S.jsxs)(l.YStack,{children:[(0,S.jsxs)(l.YStack,{gap:"$3",children:[(0,S.jsx)(l.Stack,{onLayout:b,children:(0,S.jsx)(l.SizableText,_objectSpread(_objectSpread({size:"$bodyMd",numberOfLines:c},r),{},{children:t}))}),p?(0,S.jsx)(l.Button,{size:"medium",variant:"secondary",onPress:x,$gtMd:{size:"small"},children:n.formatMessage({id:c?u.ETranslations.global_view_more:u.ETranslations.global_view_less})}):null]}),g?(0,S.jsx)(l.Stack,{onLayout:h,opacity:0,position:"absolute",left:0,top:0,children:(0,S.jsx)(l.SizableText,_objectSpread(_objectSpread({size:"$bodyMd"},r),{},{children:t}))}):null]})}function MarketAbout({children:e}){var t=(0,s.A)();return e?(0,S.jsxs)(l.YStack,{gap:"$3",pt:"$10",children:[(0,S.jsx)(l.SizableText,{size:"$headingSm",children:t.formatMessage({id:u.ETranslations.global_about})}),(0,S.jsx)(ViewMoreText,{color:"$textSubdued",children:e})]}):null}var $=r(880590),M=r(911998),w=r(639563);function MarketTokenAddress({tokenName:e,address:t,uri:r,networkId:n,tokenNameColor:a,tokenNameSize:c="$bodyMdMedium",addressSize:d="$bodyMd"}){var m=(0,s.A)(),{copyText:h}=(0,l.useClipboard)(),{result:f}=(0,M.yk)((function(){return b.A.serviceNetwork.getNetwork({networkId:n})}),[n],{checkIsFocused:!1,overrideIsFocused:function(){return!1}}),p=(0,l.useDialogInstance)(),x=(0,i.useCallback)((0,o.A)((function*(){(0,w.HM)({networkId:n,address:t})})),[p,n,t]),g=(0,i.useCallback)((function(){return r?(0,S.jsx)(l.Image,{size:"$5",src:decodeURIComponent(r),borderRadius:"$full"}):n?(0,S.jsx)($.um,{size:"$5",networkId:n}):(0,S.jsx)(l.Stack,{width:"$5",height:"$5",ai:"center",jc:"center",bg:"$bgStrong",borderRadius:"$full",children:(0,S.jsx)(l.Icon,{size:"$2.5",name:"PlaceholderSolid"})})}),[n,r]);return(0,S.jsxs)(l.XStack,{gap:"$1.5",ai:"center",children:[g(),(0,S.jsxs)(l.XStack,{gap:"$2",children:[(0,S.jsx)(l.SizableText,{color:a,size:c,children:`${e||f?.name||""}:`}),(0,S.jsx)(l.SizableText,{size:d,children:`${t.slice(0,6)}...${t.slice(t.length-4,t.length)}`})]}),(0,S.jsx)(l.IconButton,{title:m.formatMessage({id:u.ETranslations.global_copy}),variant:"tertiary",color:"$iconSubdued",icon:"Copy1Outline",size:"small",iconSize:"$4",onPress:function(){return h(t)}}),(0,S.jsx)(l.IconButton,{title:m.formatMessage({id:u.ETranslations.global_view_in_blockchain_explorer}),variant:"tertiary",color:"$iconSubdued",icon:"OpenOutline",size:"small",iconSize:"$4",onPress:x})]})}var O=4;function MarketDetailOverviewContract({detailPlatforms:e}){var t=(0,s.A)(),r=(0,i.useMemo)((function(){return e?Object.keys(e).filter((function(t){return!!t&&!e[t].hideContractAddress})):[]}),[e]),n=r.length<=O,[o,a]=(0,i.useState)(n),c=(0,i.useCallback)((function(){a((function(e){return!e}))}),[]),d=(0,i.useMemo)((function(){return o?r:r.slice(0,O)}),[o,r]);return e&&r.length?(0,S.jsxs)(l.YStack,{pt:"$3",gap:"$3",children:[(0,S.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodySm",children:t.formatMessage({id:u.ETranslations.global_contract})}),d.map((function(t){var r=e[t];return(0,S.jsx)(MarketTokenAddress,{tokenNameSize:"$bodyMd",tokenNameColor:"$textSubdued",addressSize:"$bodyMdMedium",networkId:r.onekeyNetworkId,address:r.contract_address},t)})),n?null:(0,S.jsx)(l.Button,{size:"medium",variant:"secondary",onPress:c,$gtMd:{size:"small"},children:t.formatMessage({id:o?u.ETranslations.global_view_less:u.ETranslations.global_view_more})})]}):null}var T=r(378302),P=r(781889);function OverviewPriceChange({title:e,children:t}){return(0,S.jsxs)(l.YStack,{alignItems:"center",flexBasis:0,flexGrow:1,children:[(0,S.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodySm",children:e}),(0,S.jsx)(P.E,{size:"$bodyMdMedium",width:"100%",textAlign:"center",children:t})]})}function Overview24PriceChange({name:e,symbol:t,currentPrice:r,low:n,high:o,lastUpdated:a}){var d=(0,s.A)(),[m]=(0,c.useSettingsPersistAtom)(),h=m.currencyInfo.symbol,f=(0,T.u)({name:e,symbol:t,price:r,lastUpdated:new Date(a).getTime()}),b=Math.min(Number(n),Number(f)),p=Math.max(Number(o),Number(f)),x=(0,i.useMemo)((function(){var e=new k.A(f);if(!e.isNaN()){var t=new k.A(b),r=new k.A(p);return Number(e.minus(t).div(r.minus(t)).shiftedBy(2).toFixed(2))}}),[f,b,p]);return(0,S.jsxs)(l.YStack,{gap:"$2.5",children:[(0,S.jsx)(l.SizableText,{size:"$bodyMd",color:"$textSubdued",children:d.formatMessage({id:u.ETranslations.market_24h_price_range})}),void 0!==x?(0,S.jsx)(l.Progress,{value:x,height:"$1"}):null,(0,S.jsxs)(l.XStack,{jc:"space-between",children:[(0,S.jsxs)(l.XStack,{gap:"$1",children:[(0,S.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodyMd",children:d.formatMessage({id:u.ETranslations.market_low})}),(0,S.jsx)(l.NumberSizeableText,{size:"$bodyMdMedium",formatter:"price",formatterOptions:{currency:h},children:b})]}),(0,S.jsxs)(l.XStack,{gap:"$1",children:[(0,S.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodyMd",children:d.formatMessage({id:u.ETranslations.market_high})}),(0,S.jsx)(l.NumberSizeableText,{size:"$bodyMdMedium",formatter:"price",formatterOptions:{currency:h},children:p})]})]})]})}function OverviewMarketVOLItem({title:e,rank:t,children:r,currency:n}){var[o]=(0,c.useSettingsPersistAtom)();return(0,S.jsxs)(l.YStack,{pb:"$3",flexBasis:0,flexGrow:1,borderColor:"$borderSubdued",borderBottomWidth:"$px",children:[(0,S.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodySm",children:e}),(0,S.jsxs)(l.XStack,{gap:"$1",ai:"center",pt:"$0.5",children:[(0,S.jsx)(l.NumberSizeableText,{size:"$bodyMdMedium",formatter:"marketCap",formatterOptions:n?{currency:o.currencyInfo.symbol}:void 0,children:r}),t?(0,S.jsx)(l.SizableText,{size:"$bodySm",bg:"$bgStrong",color:"$textSubdued",borderRadius:"$1",px:"$1",children:`#${t}`}):null]})]})}function OverviewMarketVOL({fdv:e,volume24h:t,marketCap:r,marketCapRank:n,maxSupply:o,totalSupply:i,circulatingSupply:a,detailPlatforms:c}){var d=(0,s.A)();return(0,S.jsxs)(l.YStack,{pt:"$10",children:[(0,S.jsxs)(l.YStack,{gap:"$3",children:[(0,S.jsxs)(l.XStack,{gap:"$4",children:[(0,S.jsx)(OverviewMarketVOLItem,{currency:!0,title:d.formatMessage({id:u.ETranslations.market_24h_vol_usd}),children:t||"-"}),(0,S.jsx)(OverviewMarketVOLItem,{currency:!0,title:d.formatMessage({id:u.ETranslations.global_market_cap}),rank:n,children:r||"-"})]}),(0,S.jsxs)(l.XStack,{gap:"$4",children:[(0,S.jsx)(OverviewMarketVOLItem,{currency:!0,title:d.formatMessage({id:u.ETranslations.global_fdv}),children:e||"-"}),(0,S.jsx)(OverviewMarketVOLItem,{title:d.formatMessage({id:u.ETranslations.global_circulating_supply}),children:a||"-"})]}),(0,S.jsxs)(l.XStack,{gap:"$4",children:[(0,S.jsx)(OverviewMarketVOLItem,{title:d.formatMessage({id:u.ETranslations.global_total_supply}),children:i||"-"}),(0,S.jsx)(OverviewMarketVOLItem,{title:d.formatMessage({id:u.ETranslations.global_max_supply}),children:o||"∞"})]})]}),(0,S.jsx)(MarketDetailOverviewContract,{detailPlatforms:c})]})}function MarketDetailOverview({token:{name:e,symbol:t,detailPlatforms:r,stats:{maxSupply:n,totalSupply:o,circulatingSupply:i,currentPrice:a,lastUpdated:c,performance:d,volume24h:m,marketCap:h,marketCapRank:f,fdv:b,low24h:p,high24h:x},about:g}}){var k=(0,s.A)();return(0,S.jsx)(l.NestedScrollView,{children:(0,S.jsxs)(l.YStack,{pb:"$10",$md:{px:"$5"},children:[(0,S.jsxs)(l.XStack,{borderWidth:"$px",borderRadius:"$2",borderColor:"$borderSubdued",py:"$3",my:"$6",children:[(0,S.jsx)(OverviewPriceChange,{title:k.formatMessage({id:u.ETranslations.market_1d}),children:d.priceChangePercentage24h}),(0,S.jsx)(OverviewPriceChange,{title:k.formatMessage({id:u.ETranslations.market_1w}),children:d.priceChangePercentage7d}),(0,S.jsx)(OverviewPriceChange,{title:k.formatMessage({id:u.ETranslations.market_1m}),children:d.priceChangePercentage30d}),(0,S.jsx)(OverviewPriceChange,{title:k.formatMessage({id:u.ETranslations.market_1y}),children:d.priceChangePercentage1y})]}),(0,S.jsx)(Overview24PriceChange,{name:e,symbol:t,currentPrice:a,low:p,high:x,lastUpdated:c}),(0,S.jsx)(OverviewMarketVOL,{volume24h:m,fdv:b,marketCap:h,marketCapRank:f,maxSupply:n,totalSupply:o,circulatingSupply:i,detailPlatforms:r}),(0,S.jsx)(MarketAbout,{children:g})]})})}var C=r(217715),_=r(172120),I=r(202338);function TextCell({title:e,children:t,rank:r}){var[n]=(0,c.useSettingsPersistAtom)(),o=n.currencyInfo.symbol;return(0,S.jsxs)(l.YStack,{pt:"$3",children:[(0,S.jsx)(l.SizableText,{size:"$bodySm",color:"$textSubdued",children:e}),(0,S.jsxs)(l.XStack,{gap:"$1",ai:"center",children:[(0,S.jsx)(l.NumberSizeableText,{numberOfLines:1,size:"$bodyMdMedium",formatter:"marketCap",formatterOptions:{currency:o},children:t}),r?(0,S.jsx)(l.YStack,{px:"$1",borderRadius:"$1",bg:"$bgStrong",children:(0,S.jsx)(l.SizableText,{size:"$bodySm",color:"$textSubdued",children:`#${r}`})}):null]})]})}var z=r(117746);function MarketDetailLinks({token:{links:{discordUrl:e,homePageUrl:t,telegramUrl:r,twitterUrl:n,whitepaper:o},explorers:i}}){var a=(0,s.A)();return(0,S.jsx)(l.NestedScrollView,{contentContainerStyle:{minHeight:"101%"},children:(0,S.jsxs)(l.YStack,{px:"$5",$gtMd:{pr:0},children:[(0,S.jsxs)(l.YStack,{py:"$5",gap:"$2",children:[(0,S.jsx)(l.SizableText,{size:"$headingSm",color:"$textSubdued",children:a.formatMessage({id:u.ETranslations.global_community})}),(0,S.jsxs)(l.XStack,{gap:"$3",children:[n?(0,S.jsx)(l.IconButton,{title:"X",icon:"Xbrand",onPress:function(){return(0,z.Dr)(n)}}):null,r?(0,S.jsx)(l.IconButton,{title:"Telegram",icon:"TelegramBrand",onPress:function(){return(0,z.Dr)(r)}}):null,e?(0,S.jsx)(l.IconButton,{title:"Discord",icon:"DiscordBrand",onPress:function(){return(0,z.Dr)(e)}}):null]})]}),(0,S.jsxs)(l.YStack,{py:"$5",gap:"$2",children:[(0,S.jsx)(l.SizableText,{size:"$headingSm",color:"$textSubdued",children:a.formatMessage({id:u.ETranslations.global_official_links})}),(0,S.jsxs)(l.XStack,{gap:"$3",children:[t?(0,S.jsx)(l.Button,{iconAfter:"OpenOutline",onPress:function(){return(0,z.Dr)(t)},children:a.formatMessage({id:u.ETranslations.global_website})}):null,o?(0,S.jsx)(l.Button,{icon:"BookOpenOutline",iconAfter:"OpenOutline",onPress:function(){return(0,z.Dr)(o)},children:a.formatMessage({id:u.ETranslations.global_white_paper})}):null]})]}),i.length?(0,S.jsxs)(l.YStack,{py:"$5",children:[(0,S.jsx)(l.SizableText,{size:"$headingSm",color:"$textSubdued",children:a.formatMessage({id:u.ETranslations.global_explorers})}),(0,S.jsx)(l.XStack,{flexWrap:"wrap",children:i.map((function({url:e,name:t}){return(0,S.jsx)(l.Button,{mt:"$2",mr:"$3",iconAfter:"OpenOutline",onPress:function(){return(0,z.Dr)(e)},children:t},e)}))})]}):null]})})}var D=r(304695);function MarketPoolIcon({uri:e}){return(0,S.jsxs)(l.Image,{size:"$5",borderRadius:"$full",children:[(0,S.jsx)(l.Image.Source,{src:e}),(0,S.jsx)(l.Image.Fallback,{children:(0,S.jsx)(l.Stack,{flex:1,borderRadius:"$full",bg:"$bgDisabled",ai:"center",jc:"center",children:(0,S.jsx)(l.Icon,{size:"$3.5",color:"$iconSubdued",name:"SwitchHorOutline"})})}),(0,S.jsx)(l.Image.Loading,{children:(0,S.jsx)(l.Skeleton,{width:"100%",height:"100%"})})]})}var A=r(936748);function PoolDetailsItem({title:e,children:t,currency:r,isNumeric:n=!1,formatter:o="marketCap"}){var[a]=(0,c.useSettingsPersistAtom)(),s=a.currencyInfo.symbol,d=(0,i.useMemo)((function(){return n?(0,S.jsx)(l.NumberSizeableText,{size:"$bodyMdMedium",formatter:o,formatterOptions:r?{currency:s}:void 0,children:t}):"string"==typeof t?(0,S.jsx)(l.SizableText,{size:"$bodyMdMedium",children:t}):t}),[t,r,s,o,n]);return(0,S.jsxs)(l.YStack,{pb:"$3",flexBasis:0,flexGrow:1,gap:"$0.5",borderColor:"$borderSubdued",borderBottomWidth:"$px",children:[(0,S.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodySm",children:e}),d]})}function PoolDetailDialog({item:{attributes:e,dexName:t,dexLogoUrl:r,onekeyNetworkId:n,id:o,baseTokenImageUrl:i,quoteTokenImageUrl:a,relationships:{baseToken:c,quoteToken:d,dex:{data:{id:m}}}}}){var h=(0,s.A)(),[f,b]=e.name.split("/");return(0,S.jsxs)(l.YStack,{gap:"$3",children:[(0,S.jsxs)(l.XStack,{gap:"$4",children:[(0,S.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_pair}),children:e.name}),(0,S.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_dex}),children:(0,S.jsxs)(l.XStack,{gap:"$1.5",children:[(0,S.jsx)(MarketPoolIcon,{uri:r}),(0,S.jsx)(l.SizableText,{size:"$bodyMdMedium",children:t})]})})]}),(0,S.jsxs)(l.XStack,{gap:"$4",children:[(0,S.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_price}),currency:!0,isNumeric:!0,formatter:"price",children:e.baseTokenPriceUsd}),(0,S.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.market_24h_txns}),isNumeric:!0,children:String(e.transactions.h24.buys+e.transactions.h24.sells)})]}),(0,S.jsxs)(l.XStack,{gap:"$4",children:[(0,S.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.market_twenty_four_hour_volume}),isNumeric:!0,children:e.volumeUsd.h24}),(0,S.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_liquidity}),isNumeric:!0,children:e.reserveInUsd})]}),(0,S.jsxs)(l.XStack,{gap:"$4",children:[(0,S.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_fdv}),isNumeric:!0,children:e.fdvUsd}),(0,S.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.market_days_since_launch}),children:h.formatMessage({id:u.ETranslations.market_number_of_days},{number:(0,A.A)(new Date,new Date(e.poolCreatedAt))})})]}),(0,S.jsxs)(l.YStack,{gap:"$6",pt:"$6",pb:"$10",children:[(0,S.jsx)(MarketTokenAddress,{networkId:n,tokenName:f.trim(),address:c.data.id.split("_").pop(),uri:i}),(0,S.jsx)(MarketTokenAddress,{networkId:n,tokenName:b.trim(),address:d.data.id.split("_").pop(),uri:a}),(0,S.jsx)(MarketTokenAddress,{networkId:n,tokenName:h.formatMessage({id:u.ETranslations.global_pair_contract}),address:o.split("_").pop()})]})]})}var E=r(610101);function MarketDetailPools_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MarketDetailPools_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MarketDetailPools_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MarketDetailPools_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NetworkIdSelect({value:e,onChange:t,options:r,oneKeyNetworkImages:n}){return(0,S.jsx)(l.XStack,{gap:"$2",px:"$5",pb:"$2",mt:"$5",$gtMd:{pr:0},py:"$2",children:r.map((function(r,o){return(0,S.jsx)(D.V,{networkImageUri:n[o]?.logoURI,isSelected:e===o,onPress:function(){return t(o)}},r)}))})}function MarketDetailPools({pools:e}){var[t]=(0,c.useSettingsPersistAtom)(),r=t.currencyInfo.symbol,n=(0,s.A)(),{gtXl:o}=(0,l.useMedia)(),a=(0,i.useMemo)((function(){return e.map((function(e){return e.onekeyNetworkId})).filter((function(e){return Boolean(e)}))}),[e]),{result:d}=(0,M.yk)((function(){return Promise.all(a.map((function(e){return e?b.A.serviceNetwork.getNetwork({networkId:e}):Promise.resolve({logoURI:""})})))}),[a],{initResult:[]}),[m,h]=(0,i.useState)(0),f=(0,i.useMemo)((function(){return e[m]}),[m,e]).data.map((function(e){return MarketDetailPools_objectSpread(MarketDetailPools_objectSpread({},e),{},{dexDataName:e.dexName,price:Number(e.attributes.baseTokenPriceUsd),txTotal:Number(e.attributes.transactions.h24.buys+e.attributes.transactions.h24.sells),volumeUsdH24:Number(e.attributes.volumeUsd.h24),reserveInUsd:Number(e.attributes.reserveInUsd)})})),p=(0,i.useCallback)((function(e){h(e)}),[]),{sortedListData:x,handleSortTypeChange:g}=(0,E.K)(f,m),k=(0,i.useCallback)((function(e){return{onSortTypeChange:function(t){g?.({columnName:e.dataIndex,order:t})}}}),[g]),j=(0,i.useCallback)((function(e){return{onPress:function(){l.Dialog.show({showFooter:!1,title:n.formatMessage({id:u.ETranslations.market_pool_details}),renderContent:(0,S.jsx)(PoolDetailDialog,{item:e})})}}}),[n]),y=(0,i.useMemo)((function(){return[{title:n.formatMessage({id:u.ETranslations.global_pair}),titleProps:{size:"$bodySmMedium",color:"$textSubdued"},columnProps:{flexGrow:3,flexBasis:0},dataIndex:"dexDataName",render:function(e,{dexLogoUrl:t,attributes:r,dexDataName:n}){return(0,S.jsxs)(l.XStack,{gap:"$2.5",ai:"center",children:[(0,S.jsx)(MarketPoolIcon,{uri:t}),(0,S.jsxs)(l.YStack,{flexShrink:1,children:[(0,S.jsx)(l.SizableText,{size:"$bodyMdMedium",numberOfLines:1,userSelect:"none",children:r.name}),(0,S.jsx)(l.SizableText,{userSelect:"none",size:"$bodySm",color:"$textSubdued",numberOfLines:1,children:n})]})]})}},o?{title:n.formatMessage({id:u.ETranslations.global_price}),titleProps:{size:"$bodySmMedium",color:"$textSubdued"},align:"right",dataIndex:"price",columnProps:{flexGrow:2,flexBasis:0},render:function(e){return(0,S.jsx)(l.NumberSizeableText,{userSelect:"none",size:"$bodyMd",formatter:"price",formatterOptions:{currency:r},textAlign:"right",children:e})}}:void 0,o?{title:n.formatMessage({id:u.ETranslations.market_24h_txns}),titleProps:{size:"$bodySmMedium",color:"$textSubdued"},align:"right",dataIndex:"txTotal",columnProps:{flexGrow:2,flexBasis:0},render:function(e){return(0,S.jsx)(l.NumberSizeableText,{userSelect:"none",size:"$bodyMd",formatter:"marketCap",textAlign:"right",children:e})}}:void 0,{title:n.formatMessage({id:u.ETranslations.market_twenty_four_hour_volume}),titleProps:{size:"$bodySmMedium",color:"$textSubdued"},align:"right",dataIndex:"volumeUsdH24",columnProps:{flexGrow:2,flexBasis:0},render:function(e){return(0,S.jsx)(l.NumberSizeableText,{userSelect:"none",size:"$bodyMd",formatter:"marketCap",textAlign:"right",children:e})}},{title:n.formatMessage({id:u.ETranslations.global_liquidity}),titleProps:{size:"$bodySmMedium",color:"$textSubdued"},align:"right",dataIndex:"reserveInUsd",columnProps:{flexGrow:2,flexBasis:0},render:function(e){return(0,S.jsx)(l.NumberSizeableText,{userSelect:"none",size:"$bodyMd",formatter:"marketCap",textAlign:"right",children:e})}},{title:"",align:"right",dataIndex:"action",columnProps:{width:24},render:function(){return(0,S.jsx)(l.View,{left:4,$gtMd:{pl:"$7",pr:"$1"},children:(0,S.jsx)(l.Icon,{name:"ChevronRightSmallOutline",size:"$4"})})}}]}),[r,o,n]);return(0,S.jsx)(l.Table,{stickyHeader:!1,TableHeaderComponent:(0,S.jsx)(NetworkIdSelect,{options:a,oneKeyNetworkImages:d,value:m,onChange:p}),renderScrollComponent:l.renderNestedScrollView,onRow:j,onHeaderRow:k,rowProps:{px:"$3",mx:"$2",minHeight:"$12"},estimatedItemSize:"$12",headerRowProps:{py:"$2",minHeight:36},dataSource:x,columns:y,extraData:m})}function TokenDetailTabs_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function TokenDetailTabs_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?TokenDetailTabs_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TokenDetailTabs_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function SkeletonRow(){return(0,S.jsxs)(l.XStack,{children:[(0,S.jsx)(l.XStack,{flex:1,children:(0,S.jsx)(l.Skeleton,{w:"$24",h:"$3"})}),(0,S.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,S.jsx)(l.Skeleton,{w:"$16",h:"$3"})}),(0,S.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,S.jsx)(l.Skeleton,{w:"$16",h:"$3"})}),(0,S.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,S.jsx)(l.Skeleton,{w:"$16",h:"$3"})}),(0,S.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,S.jsx)(l.Skeleton,{w:"$16",h:"$3"})})]})}function MdSkeletonRow(){return(0,S.jsxs)(l.XStack,{children:[(0,S.jsx)(l.XStack,{flex:1,children:(0,S.jsx)(l.Skeleton,{w:"$24",h:"$3"})}),(0,S.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,S.jsx)(l.Skeleton,{w:"$16",h:"$3"})}),(0,S.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,S.jsx)(l.Skeleton,{w:"$16",h:"$3"})})]})}var N=(0,i.memo)((function BasicTokenDetailTabs({token:e,listHeaderComponent:t,isRefreshing:r,onRefresh:n,defer:a}){var c=(0,s.A)(),{md:d}=(0,l.useMedia)(),[h,f]=(0,i.useState)(void 0),p=(0,i.useCallback)((0,o.A)((function*(){if(e?.detailPlatforms){var t=yield b.A.serviceMarket.fetchPools(e.detailPlatforms);m.Ay.isNativeAndroid?yield a.promise:setTimeout((function(){a.resolve(null)}),100),f(t)}})),[a,e?.detailPlatforms]);(0,i.useEffect)((function(){p()}),[p]),(0,i.useMemo)((function(){return d?(0,S.jsxs)(l.YStack,{gap:"$10",px:"$5",pt:"$11",children:[(0,S.jsx)(MdSkeletonRow,{}),(0,S.jsx)(MdSkeletonRow,{}),(0,S.jsx)(MdSkeletonRow,{}),(0,S.jsx)(MdSkeletonRow,{})]}):(0,S.jsxs)(l.YStack,{gap:"$6",px:"$5",pt:"$11",children:[(0,S.jsx)(SkeletonRow,{}),(0,S.jsx)(SkeletonRow,{}),(0,S.jsx)(SkeletonRow,{}),(0,S.jsx)(SkeletonRow,{})]})}),[d]);var x=(0,i.useMemo)((function(){return h?[h.length&&e?{title:c.formatMessage({id:u.ETranslations.global_pools}),page:function(e){return(0,S.jsx)(MarketDetailPools,TokenDetailTabs_objectSpread(TokenDetailTabs_objectSpread({},e),{},{pools:h}))}}:void 0,d&&e?{title:c.formatMessage({id:u.ETranslations.global_overview}),page:function(t){return(0,S.jsx)(MarketDetailOverview,TokenDetailTabs_objectSpread(TokenDetailTabs_objectSpread({},t),{},{token:e}))}}:void 0,e&&{title:c.formatMessage({id:u.ETranslations.global_links}),page:function(t){return(0,S.jsx)(MarketDetailLinks,TokenDetailTabs_objectSpread(TokenDetailTabs_objectSpread({},t),{},{token:e}))}}].filter(Boolean):[]}),[c,d,h,e]);return(0,S.jsx)(l.Tab,{refreshControl:(0,S.jsx)(l.RefreshControl,{refreshing:!!r,onRefresh:n}),$gtMd:{pr:"$5"},$md:{mt:"$5"},data:x,disableRefresh:!0,ListHeaderComponent:(0,S.jsx)(l.Stack,{mb:"$5",children:t}),onSelectedPageIndex:function(e){}})})),L=r(714718),R=r(223946);var ChartViewAdapter=function({data:e,onHover:t,lineColor:r,topColor:n,bottomColor:o,height:a}){var s=(0,i.useRef)(null);return(0,i.useEffect)((function(){if(s.current){var{chart:e,handleResize:r}=function createChartDom(e,t,r,n){var o=e(t,{height:n,layout:{background:{color:"transparent"}},crosshair:{vertLine:{visible:!1},horzLine:{visible:!1}},grid:{vertLines:{visible:!1},horzLines:{visible:!1}},timeScale:{visible:!1,fixLeftEdge:!0,fixRightEdge:!0,lockVisibleTimeRangeOnResize:!0},rightPriceScale:{visible:!1},handleScale:{pinch:!1,mouseWheel:!1}}),handleResize=function(){o.applyOptions({width:t.clientWidth})};return o.subscribeCrosshairMove((function({time:e,seriesPrices:t}){r({time:e,price:t.values().next().value})})),o.timeScale().fitContent(),window.addEventListener("resize",handleResize),window._onekey_chart=o,{chart:o,handleResize}}(R.R9,s.current,t,a);return function(){window.removeEventListener("resize",r),e.remove()}}}),[]),(0,i.useEffect)((function(){!function updateChartDom({lineColor:e,topColor:t,bottomColor:r,data:n}){var o=n.map((function([e,t]){return{time:e,value:t}})),i=window._onekey_chart;if(!i._onekey_series){var a=i.addAreaSeries({lineColor:e,topColor:t,bottomColor:r,lineWidth:2,crosshairMarkerBorderColor:"#fff",crosshairMarkerRadius:5});return a.setData(o),void(i._onekey_series=a)}var s=i._onekey_series;s.applyOptions({lineColor:e,topColor:t,bottomColor:r}),s.setData(o),n.length>2&&i.timeScale().setVisibleLogicalRange({from:.4,to:n.length-1.4})}({bottomColor:o,topColor:n,lineColor:r,data:e})}),[o,n,e,r]),(0,S.jsx)("div",{style:{width:"100%",height:a},ref:s})};ChartViewAdapter.displayName="ChartViewAdapter";const H=ChartViewAdapter;var ChartView=function({data:e,onHover:t,height:r,isFetching:n}){return(0,S.jsx)(H,{isFetching:n,height:r,data:e,lineColor:"#33C641",topColor:"#00B81233",bottomColor:"#00FF1900",onHover:t})};ChartView.displayName="ChartView";const U=(0,i.memo)(ChartView);function PriceLabel({price:e,time:t,opacity:r}){var n;null!==e&&(n=(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(l.SizableText,{size:"$bodyMd",color:"$textSubdued",$md:{size:"$bodySm",color:"$text"},children:t})}));var[o]=(0,c.useSettingsPersistAtom)(),i=o.currencyInfo.symbol;return(0,S.jsxs)(l.Stack,{opacity:r,flexDirection:"column",$md:{flexDirection:"row",pt:"$6"},$gtMd:{height:"$10"},children:[(0,S.jsx)(l.XStack,{children:n}),(0,S.jsx)(l.NumberSizeableText,{size:"$bodyMdMedium",formatter:"price",formatterOptions:{currency:i},$md:{size:"$bodySmMedium",ml:"$2"},children:String(e)})]})}function PriceChart({data:e,isFetching:t,children:r}){var{formatDate:n}=(0,L.A)(),o=(0,s.A)(),[a,c]=(0,i.useState)(),[d,m]=(0,i.useState)(""),{gtMd:h}=(0,l.useMedia)(),f=e?.length?e[0][1]:0,b=e?.length?e[e.length-1][1]:0,p=(0,i.useMemo)((function(){return e?"undefined"===a||void 0===a?b:"string"==typeof a?+a:a:null}),[e,b,a]),x=(0,i.useCallback)((function(e){var t;""===e.price&&""===e.time||(t=e.time instanceof Date?n(e.time):"number"==typeof e.time?n(new Date(e.time)):"string"==typeof e.time?n(new Date(+e.time)):"",m(t),c(e.price))}),[n]),g=(0,S.jsx)(PriceLabel,{opacity:d?1:0,price:p,time:d||"",basePrice:f}),k=(0,i.useMemo)((function(){return t?(0,S.jsx)(l.Spinner,{"$platform-native":{mt:-190}}):(0,S.jsx)(l.Empty,{title:o.formatMessage({id:u.ETranslations.global_no_data})})}),[o,t]),j=e&&e.length>0?(0,S.jsx)(U,{isFetching:t,height:h?298:326,data:e,onHover:x}):k,y=t?(0,S.jsx)(l.Spinner,{}):j;return h?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(l.XStack,{justifyContent:"space-between",children:[t?(0,S.jsxs)(l.YStack,{gap:"$2",children:[(0,S.jsx)(l.Skeleton,{w:"$10",h:"$3"}),(0,S.jsx)(l.Skeleton,{w:"$24",h:"$3"})]}):g,r]}),(0,S.jsx)(l.Stack,{h:240,mt:32,$gtMd:{mt:"$1"},justifyContent:"center",alignItems:"center",children:y})]}):(0,S.jsxs)(S.Fragment,{children:[g,(0,S.jsx)(l.Stack,{h:190,mt:24,justifyContent:"center",alignItems:"center",children:y}),(0,S.jsx)(l.Stack,{mt:8,children:r})]})}var X=(0,i.memo)((function BasicTokenPriceChart({coinGeckoId:e,defer:t}){var r=(0,s.A)(),[n,a]=(0,i.useState)([]),[c,d]=(0,i.useState)(!1),h=(0,i.useMemo)((function(){return[{label:r.formatMessage({id:u.ETranslations.market_1d}),value:"1"},{label:r.formatMessage({id:u.ETranslations.market_1w}),value:"7"},{label:r.formatMessage({id:u.ETranslations.market_1m}),value:"30"},{label:r.formatMessage({id:u.ETranslations.market_1y}),value:"365"},{label:r.formatMessage({id:u.ETranslations.global_all}),value:"max"}]}),[r]),[f,p]=(0,i.useState)(h[0].value),x=(0,i.useCallback)((0,o.A)((function*(){d(!0);var r=yield b.A.serviceMarket.fetchTokenChart(e,f);m.Ay.isNativeAndroid?setTimeout((function(){t.resolve(null)}),100):yield t.promise,a(r),d(!1)})),[e,f,t]);(0,i.useEffect)((function(){x()}),[x]);var{gtLg:g}=(0,l.useMedia)();return(0,S.jsxs)(l.YStack,{px:"$5",$gtMd:{pr:0},children:[(0,S.jsx)(l.YStack,{h:326,$gtMd:{h:294},children:(0,S.jsx)(PriceChart,{isFetching:c,data:n,children:g?(0,S.jsx)(l.SegmentControl,{value:f,onChange:p,options:h}):null})}),g?null:(0,S.jsx)(l.Stack,{mt:"$5",children:(0,S.jsx)(l.SegmentControl,{fullWidth:!0,value:f,onChange:p,options:h})})]})})),B=r(993892),Y=r(802172);function MarketDetail_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MarketDetail_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MarketDetail_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MarketDetail_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function TokenDetailHeader({coinGeckoId:e,token:t}){var r=(0,s.A)(),[n,a]=(0,i.useState)(t),{name:c,symbol:d,stats:{performance:m,volume24h:h,marketCap:f,marketCapRank:p,fdv:x,currentPrice:g,lastUpdated:k}}=n,{gtMd:j}=(0,l.useMedia)();return(0,i.useEffect)((function(){var t=setInterval((0,o.A)((function*(){var t=yield b.A.serviceMarket.fetchMarketTokenDetail(e);a(t)})),45e3);return function(){clearInterval(t)}}),[e]),(0,S.jsxs)(l.YStack,{px:"$5",$md:{minHeight:150},children:[(0,S.jsxs)(l.YStack,{flex:1,children:[(0,S.jsx)(l.SizableText,{size:"$headingMd",color:"$textSubdued",children:c}),(0,S.jsxs)(l.XStack,{ai:"center",jc:"space-between",pt:"$2",children:[(0,S.jsx)(T.D,{size:"$heading3xl",price:g,tokenName:c,tokenSymbol:d,lastUpdated:k}),(0,S.jsx)(_.J,{coingeckoId:e,mr:"$-2",size:"medium"})]}),(0,S.jsx)(P.E,{pt:"$0.5",width:"100%",children:m.priceChangePercentage24h})]}),j?(0,S.jsx)(MarketDetailOverview,{token:n}):(0,S.jsxs)(l.XStack,{flex:1,ai:"center",alignContent:"stretch",flexWrap:"wrap",gap:"$5",children:[(0,S.jsx)(TextCell,{title:r.formatMessage({id:u.ETranslations.market_24h_vol_usd}),children:h||"-"}),(0,S.jsx)(TextCell,{title:r.formatMessage({id:u.ETranslations.global_market_cap}),rank:p,children:f||"-"}),(0,S.jsx)(TextCell,{title:r.formatMessage({id:u.ETranslations.global_fdv}),children:x||"-"})]})]})}function SkeletonHeader(){return(0,S.jsxs)(l.YStack,{children:[(0,S.jsx)(l.Skeleton,{w:"$24",h:"$4"}),(0,S.jsx)(l.View,{pt:"$5",pb:"$3.5",children:(0,S.jsx)(l.Skeleton,{w:"$40",h:"$7"})}),(0,S.jsx)(l.Skeleton,{w:"$24",h:"$3"})]})}function SkeletonHeaderOverItemItem(){return(0,S.jsxs)(l.YStack,{gap:"$2",flexGrow:1,flexBasis:0,children:[(0,S.jsx)(l.Skeleton,{w:"$10",h:"$3"}),(0,S.jsx)(l.Skeleton,{w:"$24",h:"$3"})]})}function MarketDetail({route:e}){var{token:t}=e.params,{gtMd:r}=(0,l.useMedia)(),[n,s]=(0,i.useState)(!1),[c,u]=(0,i.useState)(void 0),k=(0,i.useCallback)((0,o.A)((function*(){var e=yield b.A.serviceMarket.fetchMarketTokenDetail(t);u(e)})),[t]),j=(0,i.useCallback)((0,o.A)((function*(){s(!0),yield k(),s(!1)})),[k]);(0,i.useEffect)((function(){k()}),[k]);var y=(0,i.useCallback)((function(){return(0,S.jsxs)(l.XStack,{gap:"$2",children:[(0,S.jsx)(I.t,{uri:c?.image||"",size:"$6"}),(0,S.jsx)(l.SizableText,{children:c?.symbol?.toUpperCase()})]})}),[c?.image,c?.symbol]),{shareText:v}=(0,l.useShare)(),$=(0,i.useCallback)((function(){return f.Ay.buildDeepLinkUrl({path:d.oO.market_detail,query:{coinGeckoId:t}})}),[t]),M=(0,i.useCallback)((0,o.A)((function*(){return(0,B.V)({coinGeckoId:t})})),[t]),w=(0,i.useCallback)((function(){return(0,S.jsxs)(l.XStack,{gap:"$6",ai:"center",children:[m.Ay.isExtensionUiPopup?null:(0,S.jsx)(p.X,{buildDeepLinkUrl:$,buildFullUrl:M}),(0,S.jsx)(l.HeaderIconButton,{icon:"ShareOutline",onPress:(0,o.A)((function*(){var e=(0,B.V)({coinGeckoId:t});yield v(e)}))}),r?(0,S.jsx)(C.I,{}):null]})}),[$,M,t,r,v]),O=(0,x.A)(),T=(0,i.useCallback)((function(){O.dispatch((function(e){return e.routes.length>1?a.y9.pop(e.routes.length):a.d3.reset({index:0,routes:[{name:h.FE.TabMarket}]})}))}),[O]),P=(0,i.useCallback)((function(){return(0,S.jsx)(l.NavBackButton,{onPress:T})}),[T]),_=(0,i.useMemo)((function(){return c?(0,S.jsx)(TokenDetailHeader,{coinGeckoId:t,token:c}):(0,S.jsx)(l.YStack,{px:"$5",children:r?(0,S.jsxs)(l.YStack,{gap:"$12",width:392,children:[(0,S.jsx)(SkeletonHeader,{}),(0,S.jsx)(l.YStack,{gap:"$3",children:(0,S.jsx)(l.Skeleton,{w:252,h:"$3"})}),(0,S.jsxs)(l.YStack,{gap:"$6",children:[(0,S.jsxs)(l.XStack,{children:[(0,S.jsx)(SkeletonHeaderOverItemItem,{}),(0,S.jsx)(SkeletonHeaderOverItemItem,{})]}),(0,S.jsxs)(l.XStack,{children:[(0,S.jsx)(SkeletonHeaderOverItemItem,{}),(0,S.jsx)(SkeletonHeaderOverItemItem,{})]}),(0,S.jsxs)(l.XStack,{children:[(0,S.jsx)(SkeletonHeaderOverItemItem,{}),(0,S.jsx)(SkeletonHeaderOverItemItem,{})]})]}),(0,S.jsxs)(l.YStack,{gap:"$6",children:[(0,S.jsx)(l.Skeleton,{w:"$10",h:"$3"}),(0,S.jsx)(l.Skeleton,{w:252,h:"$3"}),(0,S.jsx)(l.Skeleton,{w:252,h:"$3"}),(0,S.jsx)(l.Skeleton,{w:252,h:"$3"})]})]}):(0,S.jsxs)(l.YStack,{gap:"$6",pt:"$1",children:[(0,S.jsx)(SkeletonHeader,{}),(0,S.jsxs)(l.XStack,{children:[(0,S.jsx)(SkeletonHeaderOverItemItem,{}),(0,S.jsx)(SkeletonHeaderOverItemItem,{}),(0,S.jsx)(SkeletonHeaderOverItemItem,{})]})]})})}),[t,r,c]),z=(0,g.Q)(),D=(0,i.useMemo)((function(){return(0,S.jsx)(X,{coinGeckoId:t,defer:z})}),[t,z]);return(0,S.jsxs)(l.Page,{children:[(0,S.jsx)(l.Page.Header,{headerTitle:y,headerRight:w,headerLeft:P}),(0,S.jsx)(l.Page.Body,{children:r?(0,S.jsx)(l.YStack,{flex:1,children:(0,S.jsxs)(l.XStack,{flex:1,pt:"$5",children:[(0,S.jsx)(l.ScrollView,{minWidth:392,maxWidth:392,children:_}),(0,S.jsx)(l.YStack,{flex:1,children:(0,S.jsx)(N,{defer:z,token:c,listHeaderComponent:D})})]})}):(0,S.jsx)(N,{defer:z,isRefreshing:n,onRefresh:j,token:c,listHeaderComponent:(0,S.jsxs)(l.YStack,{children:[_,c?D:null]})})})]})}function MarketDetailWithProvider(e){return(0,S.jsx)(Y.m,{storeName:c.EJotaiContextStoreNames.marketWatchList,children:(0,S.jsx)(MarketDetail,MarketDetail_objectSpread({},e))})}},802172:(e,t,r)=>{r.d(t,{m:()=>d});var n=r(324586),o=r(514041),i=r(2577),a=r(597102),s=r(310944),l=r(907481),c=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=(0,o.memo)((function(e){var{children:t,storeName:r}=e,n=(0,l.z)(r),o=i.A.getOrCreateStore(n);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.H,_objectSpread({},n)),(0,c.jsx)(s.Hn,{store:o,children:t})]})}));d.displayName="MarketWatchListProviderMirror"},217715:(e,t,r)=>{r.d(t,{I:()=>MarketHomeHeaderSearchBar});var n=r(514041),o=r(908867),i=r(490343),a=r(498356),s=r(254491),l=r(392097),c=r(390574),d=r(506851),u=r(831085);function MarketHomeHeaderSearchBar(){var e=(0,o.A)(),t=(0,a.A)(),r=(0,n.useCallback)((function(){t.pushModal(l.ry.UniversalSearchModal,{screen:c.j.UniversalSearch,params:{filterType:d.j.MarketToken}})}),[t]);return(0,u.jsxs)(i.XStack,{$gtMd:{width:280},children:[(0,u.jsx)(i.SearchBar,{placeholder:e.formatMessage({id:s.ETranslations.global_search_tokens}),containerProps:{w:"100%"},$gtMd:{size:"small"}},"MarketHomeSearchInput"),(0,u.jsx)(i.View,{position:"absolute",top:0,left:0,right:0,bottom:0,onPress:r})]})}},172120:(e,t,r)=>{r.d(t,{J:()=>f});var n=r(324586),o=r(839850),i=r(514041),a=r(908867),s=r(490343),l=r(153763),c=r(318822),d=r(254491),u=r(450255),m=r(831085),h=["coingeckoId","size","tabIndex"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var f=(0,i.memo)((function BasicMarketStar(e){var{coingeckoId:t,size:r,tabIndex:f}=e,b=(0,o.A)(e,h),p=(0,a.A)(),x=(0,u.B)(),[g,k]=(0,i.useState)((function(){return x.isInWatchList(t)})),j=(0,l.E)(),{gtMd:S}=(0,s.useMedia)(),y=(0,i.useCallback)((function({tabIndex:e}){e===f&&k(x.isInWatchList(t))}),[x,t,f]);(0,i.useEffect)((function(){if(S&&f)return c.iL.on(c.Tu.SwitchMarketHomeTab,y),function(){c.iL.off(c.Tu.SwitchMarketHomeTab,y)}}),[S,y,f]),(0,i.useEffect)((function(){j&&k(x.isInWatchList(t))}),[x,t,j]);var v=(0,i.useCallback)((function(){g?x.removeFormWatchList(t):x.addIntoWatchList(t),k(!g)}),[x,t,g]);return(0,m.jsx)(s.IconButton,function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:p.formatMessage({id:g?d.ETranslations.market_remove_from_watchlist:d.ETranslations.market_add_to_watchlist}),icon:g?"StarSolid":"StarOutline",variant:"tertiary",size:r,iconSize:r?void 0:"$5",iconProps:{color:g?"$iconActive":"$iconDisabled"},onPress:v},b))}))},202338:(e,t,r)=>{r.d(t,{t:()=>a});var n=r(514041),o=r(490343),i=r(831085);var a=(0,n.memo)((function BasicMarketTokenIcon({uri:e,size:t}){return e?(0,i.jsxs)(o.Image,{size:t,circular:!0,children:[(0,i.jsx)(o.Image.Source,{source:{uri:decodeURIComponent(e)}}),(0,i.jsx)(o.Image.Fallback,{children:(0,i.jsx)(o.Stack,{bg:"$bgStrong",ai:"center",jc:"center",width:"100%",height:"100%",children:(0,i.jsx)(o.Icon,{name:"CoinOutline",size:"$6",color:"$iconSubdued"})})}),(0,i.jsx)(o.Image.Loading,{children:(0,i.jsx)(o.Skeleton,{width:"100%",height:"100%",radius:"round"})})]}):(0,i.jsx)(o.Skeleton,{width:t,height:t})}))},378302:(e,t,r)=>{r.d(t,{D:()=>MarketTokenPrice,u:()=>useTokenPrice});var n=r(230414),o=r(514041),i=r(490343),a=r(259227),s=r(831085),l=new(function(){function MarketTokenPriceEvent(){this.tokenPriceMap=new Map,this.priceChangedListenerMap=new Map}var e=MarketTokenPriceEvent.prototype;return e.buildKey=function buildKey(e,t){return`${e}-${t}`},e.updateTokenPrice=function updateTokenPrice({name:e,symbol:t,price:r,lastUpdated:n}){var o=this.buildKey(e,t),{lastUpdated:i=0}=this.tokenPriceMap.get(e)||{};n>i&&(this.tokenPriceMap.set(o,{price:r,lastUpdated:n}),(this.priceChangedListenerMap.get(o)||[]).forEach((function(e){return e()})))},e.getTokenPrice=function getTokenPrice(e,t){var r=this.buildKey(e,t);return this.tokenPriceMap.get(r)?.price||"-"},e.onPriceChange=function onPriceChange(e,t,r){var n=this,o=this.buildKey(e,t),i=this.priceChangedListenerMap.get(o)||[];return i.push(r),this.priceChangedListenerMap.set(o,i),function(){var e=n.priceChangedListenerMap.get(o)||[];n.priceChangedListenerMap.set(o,e.filter((function(e){return e!==r})))}},(0,n.A)(MarketTokenPriceEvent)}()),useTokenPrice=function({name:e,symbol:t,price:r,lastUpdated:n}){var[i,a]=(0,o.useState)(0);return(0,o.useMemo)((function(){l.updateTokenPrice({name:e,symbol:t,price:r,lastUpdated:n})}),[n,e,r,t]),(0,o.useLayoutEffect)((function(){return l.onPriceChange(e,t,(function(){a((function(e){return e+1}))}))}),[n,e,r,t]),(0,o.useMemo)((function(){return l.getTokenPrice(e,t)}),[e,t,i])};function MarketTokenPrice({price:e,tokenName:t,tokenSymbol:r,lastUpdated:n,size:l}){var[c]=(0,a.useSettingsPersistAtom)(),d=c.currencyInfo.symbol,u=(0,o.useMemo)((function(){return n?new Date(n).getTime():Date.now()}),[n]),m=useTokenPrice({name:t,price:e,symbol:r,lastUpdated:u});return(0,s.jsx)(i.NumberSizeableText,{userSelect:"none",formatter:"price",size:l,formatterOptions:{currency:d},children:m})}},781889:(e,t,r)=>{r.d(t,{E:()=>PriceChangePercentage});var n=r(324586),o=r(839850),i=r(490343),a=(r(663522),r(831085)),s=["children"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function PriceChangePercentage(e){var{children:t}=e,r=(0,o.A)(e,s);return t?(0,a.jsx)(i.NumberSizeableText,_objectSpread(_objectSpread({adjustsFontSizeToFit:!0,numberOfLines:2,userSelect:"none",size:"$bodyMd",formatter:"priceChange",color:Number(t)>0?"$textSuccess":"$textCritical",formatterOptions:{showPlusMinusSigns:!0}},r),{},{children:t})):(0,a.jsx)(i.SizableText,{size:"$bodyMd",children:"-"})}},610101:(e,t,r)=>{r.d(t,{K:()=>useSortType});var n=r(514041),getNumericValue=function(e,t,r){var n=e[t];return"number"==typeof n?n:"desc"===r?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER},useSortType=function(e,t){var r=(0,n.useRef)(),o=(0,n.useRef)(t);r.current!==e&&(r.current=e),o.current!==t&&(o.current=t,r.current=e);var[i,a]=(0,n.useState)({columnName:"default",order:"desc"}),s=(0,n.useCallback)((function(e){a(e)}),[]),l=(0,n.useMemo)((function(){if(r.current?.length){var t=r.current[0]?.[i?.columnName];if(i?.order)return function(e){return"number"==typeof e||null===e||"-"===e}(t)?r.current?.slice().sort((function(e,t){var r=getNumericValue(e,i.columnName,i.order),n=getNumericValue(t,i.columnName,i.order);return"desc"===i.order?n-r:r-n})):"string"==typeof t?r.current?.slice().sort((function(e,t){var r=e[i.columnName],n=t[i.columnName];return"desc"===i.order?r.localeCompare(n,"en",{sensitivity:"base"}):n.localeCompare(r,"en",{sensitivity:"base"})})):e}return r.current}),[e,i?.columnName,i?.order]);return(0,n.useMemo)((function(){return{sortedListData:l,handleSortTypeChange:s,sortByType:i,setSortByType:a}}),[s,i,l,a])}},450255:(e,t,r)=>{r.d(t,{B:()=>useWatchListAction});var n=r(514041),o=r(908867),i=r(490343),a=r(254491),s=r(310944),useWatchListAction=function(){var e=(0,o.A)(),t=(0,s.qr)(),r=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.removeFormWatchList(r)}),[t]),l=(0,n.useCallback)((function(r){var n=Array.isArray(r)?r:[r];t.current.addIntoWatchList(n.map((function(e){return{coingeckoId:e}}))),i.Toast.success({title:e.formatMessage({id:a.ETranslations.market_added_to_watchlist})})}),[t,e]),c=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.moveToTop(r)}),[t]),d=(0,n.useCallback)((function(e){return t.current.isInWatchList(e)}),[t]);return(0,n.useMemo)((function(){return{removeFormWatchList:r,addIntoWatchList:l,MoveToTop:c,isInWatchList:d}}),[c,l,d,r])}}}]);