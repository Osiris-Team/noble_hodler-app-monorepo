"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[31333],{326745:(e,t,n)=>{n.d(t,{u:()=>useAppRoute});var r=n(654266);function useAppRoute(){return(0,r.lq)()}},138584:(e,t,n)=>{n.d(t,{Py:()=>SimpleSpinnerSkeleton,am:()=>isLoadingState,bU:()=>PageFrame,o0:()=>isErrorState});var r=n(908867),o=n(490343),i=n(254491),a=n(831085),PageErrOccurred=function({onPress:e}){var t=(0,r.A)();return(0,a.jsx)(o.Empty,{icon:"ErrorOutline",title:t.formatMessage({id:i.ETranslations.global_an_error_occurred}),description:t.formatMessage({id:i.ETranslations.global_an_error_occurred_desc}),buttonProps:{onPress:e,children:t.formatMessage({id:i.ETranslations.global_refresh})}})},SimpleSpinnerSkeleton=function(){return(0,a.jsx)(o.Stack,{w:"100%",h:"$40",jc:"center",ai:"center",children:(0,a.jsx)(o.Spinner,{size:"large"})})},isLoadingState=function({result:e,isLoading:t}){return Boolean(void 0===e&&(void 0===t||!0===t))},isErrorState=function({result:e,isLoading:t}){return Boolean(void 0===e&&!1===t)},PageFrame=function({children:e,loading:t,LoadingSkeleton:n,error:r,onRefresh:o}){return t?n?(0,a.jsx)(n,{}):null:r?(0,a.jsx)(PageErrOccurred,{onPress:o}):(0,a.jsx)(a.Fragment,{children:e})}},431333:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var r=n(586330),o=n(514041),i=n(908867),a=n(490343),s=n(610421),l=n(325809),d=n(498356),c=n(326745),u=n(911998),m=n(254491),g=n(392097),p=n(184251),b=n(714191),f=n(138584),x=n(839850),h=n(324586),k=n(17617),j=n(353203),v=n(391944),S=n(162616),y=n(259227),w=n(491180),I=n(117746),A=n(905817),$=n(831085),_=["title","children","tooltip","link"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,h.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function StakedValue({value:e=0,stakedNumber:t=0,availableNumber:n=0,tokenSymbol:r,stakeButtonProps:o,withdrawButtonProps:s}){var l=t+n,d=(0,i.A)(),c=(0,a.useMedia)();return(0,$.jsxs)(a.YStack,{gap:"$6",children:[(0,$.jsxs)(a.YStack,{gap:"$2",children:[(0,$.jsx)(a.SizableText,{size:"$headingLg",children:d.formatMessage({id:m.ETranslations.earn_staked_value})}),(0,$.jsxs)(a.XStack,{gap:"$2",children:[(0,$.jsx)(a.NumberSizeableText,{flex:1,size:"$heading4xl",color:0===e?"$textDisabled":"$text",formatter:"value",formatterOptions:{currency:"$"},children:e||0}),c.gtMd?(0,$.jsxs)(a.XStack,{gap:"$2",children:[(0,$.jsx)(a.Button,_objectSpread(_objectSpread({},s),{},{children:d.formatMessage({id:m.ETranslations.global_withdraw})})),(0,$.jsx)(a.Button,_objectSpread(_objectSpread({},o),{},{children:d.formatMessage({id:m.ETranslations.earn_stake})}))]}):null]})]}),(0,$.jsxs)(a.YStack,{gap:"$1.5",children:[(0,$.jsx)(a.YStack,{my:"$1.5",children:(0,$.jsx)(a.Progress,{colors:["$bgSuccessStrong","$bgInverse"],size:"medium",gap:2,value:0===l?0:t/l*100})}),(0,$.jsxs)(a.XStack,{justifyContent:"space-between",children:[(0,$.jsxs)(a.YStack,{gap:"$0.5",children:[(0,$.jsx)(a.SizableText,{size:"$bodyMd",color:"$textSubdued",children:d.formatMessage({id:m.ETranslations.earn_staked})}),(0,$.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"price",formatterOptions:{tokenSymbol:r},children:t||0})]}),(0,$.jsxs)(a.YStack,{gap:"$0.5",children:[(0,$.jsx)(a.SizableText,{size:"$bodyMd",color:"$textSuccess",textAlign:"right",children:d.formatMessage({id:m.ETranslations.global_available})}),(0,$.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"price",formatterOptions:{tokenSymbol:r},children:n||0})]})]})]})]})}var PortfolioItem=function({tokenImageUri:e,tokenSymbol:t,amount:n,statusText:r,onPress:o,buttonText:i,tooltip:s,disabled:l}){return(0,$.jsxs)(a.XStack,{alignItems:"center",justifyContent:"space-between",children:[(0,$.jsxs)(a.XStack,{alignItems:"center",gap:"$1.5",children:[(0,$.jsx)(v.o,{size:"sm",tokenImageUri:e}),(0,$.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"balance",formatterOptions:{tokenSymbol:t},children:n}),(0,$.jsx)(a.XStack,{gap:"$1",ai:"center",children:(0,$.jsx)(a.SizableText,{size:"$bodyLg",children:r})}),s?(0,$.jsx)(a.Popover,{placement:"bottom",title:r,renderTrigger:(0,$.jsx)(a.IconButton,{iconColor:"$iconSubdued",size:"small",icon:"InfoCircleOutline",variant:"tertiary"}),renderContent:(0,$.jsx)(a.Stack,{p:"$5",children:(0,$.jsx)(a.SizableText,{children:s})})}):null]}),i&&o?(0,$.jsx)(a.XStack,{children:(0,$.jsx)(a.Button,{size:"small",disabled:l,variant:"primary",onPress:o,children:i})}):null]})};function Portfolio({active:e,pendingInactive:t,pendingInactivePeriod:n,pendingActive:r,pendingActiveTooltip:o,claimable:s,minClaimableNum:l,token:d,babylonOverflow:c,onClaim:u,onWithdraw:g,onPortfolioDetails:p}){var b=(0,i.A)();if(Number(t)>0||Number(s)>0||Number(r)>0||Number(c)>0||Number(e)>0){var f=Boolean(l&&s&&Number(s)<Number(l));return(0,$.jsxs)(a.YStack,{gap:"$6",children:[(0,$.jsxs)(a.XStack,{justifyContent:"space-between",children:[(0,$.jsx)(a.SizableText,{size:"$headingLg",children:b.formatMessage({id:m.ETranslations.earn_portfolio})}),void 0!==p?(0,$.jsx)(a.Button,{variant:"tertiary",iconAfter:"ChevronRightOutline",onPress:p,children:b.formatMessage({id:m.ETranslations.global_details})}):null]}),(0,$.jsxs)(a.YStack,{gap:"$3",children:[e&&Number(e)?(0,$.jsx)(PortfolioItem,{tokenImageUri:d.logoURI,tokenSymbol:d.symbol,amount:e,statusText:b.formatMessage({id:m.ETranslations.earn_active})}):null,t&&Number(t)?(0,$.jsx)(PortfolioItem,{tokenImageUri:d.logoURI,tokenSymbol:d.symbol,amount:t,statusText:b.formatMessage({id:m.ETranslations.earn_withdrawal_requested}),tooltip:n?b.formatMessage({id:m.ETranslations.earn_withdrawal_up_to_number_days},{number:n}):void 0}):null,r&&Number(r)?(0,$.jsx)(PortfolioItem,{tokenImageUri:d.logoURI,tokenSymbol:d.symbol,amount:r,tooltip:o,statusText:b.formatMessage({id:m.ETranslations.earn_pending_activation})}):null,s&&Number(s)>0?(0,$.jsx)(PortfolioItem,{tokenImageUri:d.logoURI,tokenSymbol:d.symbol,amount:s,statusText:b.formatMessage({id:m.ETranslations.earn_claimable}),onPress:u,buttonText:b.formatMessage({id:m.ETranslations.earn_claim}),tooltip:f?b.formatMessage({id:m.ETranslations.earn_minimum_claim_tooltip},{number:l,symbol:d.symbol}):void 0,disabled:f}):null]}),Number(c)>0?(0,$.jsx)(a.Alert,{mt:"$3",fullBleed:!0,borderRadius:"$3",borderWidth:k.A.hairlineWidth,borderColor:"$borderCautionSubdued",type:"critical",title:b.formatMessage({id:m.ETranslations.earn_overflow_number_alert},{number:c}),action:{primary:b.formatMessage({id:m.ETranslations.global_withdraw}),onPrimaryPress:g}}):null]})}return null}function GridItem(e){var{title:t,children:n,tooltip:r,link:i}=e,s=(0,x.A)(e,_),l=(0,o.useCallback)((function(){i&&(0,I.Dr)(i)}),[i]);return(0,$.jsxs)(a.YStack,_objectSpread(_objectSpread({p:"$3",flexBasis:"50%",$gtMd:{flexBasis:"33.33%"}},s),{},{children:[(0,$.jsxs)(a.XStack,{gap:"$1",mb:"$1",children:[(0,$.jsx)(a.SizableText,{size:"$bodyMd",color:"$textSubdued",children:t}),r?(0,$.jsx)(a.Popover,{placement:"top",title:t,renderTrigger:(0,$.jsx)(a.IconButton,{iconColor:"$iconSubdued",size:"small",icon:"InfoCircleOutline",variant:"tertiary"}),renderContent:(0,$.jsx)(a.Stack,{p:"$5",children:(0,$.jsx)(a.SizableText,{children:r})})}):null]}),(0,$.jsxs)(a.XStack,{gap:"$1",alignItems:"center",children:[(0,$.jsx)(a.SizableText,{size:"$bodyLgMedium",children:n}),i?(0,$.jsx)(a.Stack,{onPress:l,cursor:"pointer",children:(0,$.jsx)(a.Icon,{name:"OpenOutline",color:"$iconSubdued",size:"$5"})}):null]})]}))}function Profit({apr:e,earningsIn24h:t,rewardTokens:n,updateFrequency:r}){var o=(0,i.A)(),[{currencyInfo:{symbol:s}}]=(0,y.useSettingsPersistAtom)();return(0,$.jsxs)(a.YStack,{gap:"$6",children:[(0,$.jsx)(a.SizableText,{size:"$headingLg",children:o.formatMessage({id:m.ETranslations.global_profit})}),(0,$.jsxs)(a.XStack,{flexWrap:"wrap",m:"$-5",p:"$2",children:[e&&Number(e)>0?(0,$.jsx)(GridItem,{title:o.formatMessage({id:m.ETranslations.earn_rewards_percentage}),children:(0,$.jsx)(a.SizableText,{size:"$bodyLgMedium",color:"$textSuccess",children:`${e}% ${o.formatMessage({id:m.ETranslations.global_apr})}`})}):null,t&&Number(t)>0?(0,$.jsx)(GridItem,{title:o.formatMessage({id:m.ETranslations.earn_24h_earnings}),tooltip:o.formatMessage({id:m.ETranslations.earn_24h_earnings_tooltip}),children:(0,$.jsx)(a.NumberSizeableText,{formatter:"value",color:"$textSuccess",size:"$bodyLgMedium",formatterOptions:{currency:s},children:t})}):null,n?(0,$.jsx)(GridItem,{title:o.formatMessage({id:m.ETranslations.earn_reward_tokens}),children:n}):null,r?(0,$.jsx)(GridItem,{title:o.formatMessage({id:m.ETranslations.earn_update_frequency}),children:r}):null]})]})}function Provider({validator:e,minOrMaxStaking:t,untilNextLaunch:n,network:r}){var o,s=(0,i.A)();if(t){var{minValue:l,maxValue:d}=t;d&&l?o={label:s.formatMessage({id:m.ETranslations.earn_min_max_staking}),value:`${l}/${d} ${t.token}`}:l&&(o={label:s.formatMessage({id:m.ETranslations.earn_min_staking}),value:`${l} ${t.token}`})}return(0,$.jsxs)(a.YStack,{gap:"$6",children:[(0,$.jsx)(a.SizableText,{size:"$headingLg",children:s.formatMessage({id:m.ETranslations.swap_history_detail_provider})}),(0,$.jsxs)(a.XStack,{flexWrap:"wrap",m:"$-5",p:"$2",children:[(0,$.jsx)(GridItem,{title:e.isProtocol?s.formatMessage({id:m.ETranslations.global_protocol}):s.formatMessage({id:m.ETranslations.earn_validator}),link:e.link,children:(0,A.c)(e.name)}),o?(0,$.jsx)(GridItem,{title:o.label,children:(0,$.jsx)(a.SizableText,{size:"$bodyLgMedium",children:o.value})}):null,n?(0,$.jsx)(GridItem,{title:s.formatMessage({id:m.ETranslations.earn_until_next_launch}),tooltip:s.formatMessage({id:m.ETranslations.earn_until_next_launch_tooltip}),children:(0,$.jsx)(a.SizableText,{size:"$bodyLgMedium",children:s.formatMessage({id:m.ETranslations.earn_number_symbol_left},{number:Number(n.value).toFixed(2),symbol:n.token})})}):null,r?.name?(0,$.jsx)(GridItem,{title:s.formatMessage({id:m.ETranslations.global_network}),children:r.name}):null]})]})}function FAQ({solutions:e}){var t=(0,i.A)();return(0,$.jsxs)(a.YStack,{gap:"$6",children:[(0,$.jsx)(a.SizableText,{size:"$headingLg",children:t.formatMessage({id:m.ETranslations.global_faqs})}),(0,$.jsx)(a.YStack,{children:(0,$.jsx)(a.Accordion,{type:"multiple",gap:"$2",children:e.map((function({question:e,answer:t},n){return(0,$.jsxs)(a.Accordion.Item,{value:String(n),children:[(0,$.jsx)(a.Accordion.Trigger,{unstyled:!0,flexDirection:"row",alignItems:"center",borderWidth:0,bg:"$transparent",px:"$2",py:"$1",mx:"$-2",my:"$-1",hoverStyle:{bg:"$bgHover"},pressStyle:{bg:"$bgActive"},borderRadius:"$2",children:function({open:t}){return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(a.SizableText,{textAlign:"left",flex:1,size:"$bodyLgMedium",color:t?"$text":"$textSubdued",children:e}),(0,$.jsx)(a.Stack,{animation:"quick",rotate:t?"180deg":"0deg",children:(0,$.jsx)(a.Icon,{name:"ChevronDownSmallOutline",color:t?"$iconActive":"$iconSubdued",size:"$5"})})]})}}),(0,$.jsx)(a.Accordion.HeightAnimator,{animation:"quick",children:(0,$.jsx)(a.Accordion.Content,{unstyled:!0,pt:"$2",pb:"$5",animation:"quick",enterStyle:{opacity:0},exitStyle:{opacity:0},children:(0,$.jsx)(a.SizableText,{size:"$bodyMd",children:t})})})]},String(n))}))})})]})}function NoAddressWarning({accountId:e,networkId:t,indexedAccountId:n,onCreateAddress:l}){var d=(0,i.A)(),[c,g]=(0,o.useState)(!1),{activeAccount:{wallet:b}}=(0,S.LH)({num:0}),{createAddress:f}=(0,j.m)(),x=(0,o.useCallback)((0,r.A)((function*(){g(!0);try{var e=yield s.A.serviceNetwork.getGlobalDeriveTypeOfNetwork({networkId:t});yield f({num:0,account:{walletId:b?.id,networkId:t,indexedAccountId:n,deriveType:p.A.isBTCNetwork(t)?"BIP86":e},selectAfterCreate:!1}),l()}finally{g(!1)}})),[b,n,t,f,l]),{result:h}=(0,u.yk)((0,r.A)((function*(){var{serviceAccount:r,serviceNetwork:o}=s.A,i="";try{i=(yield r.getAccount({accountId:e,networkId:t})).name}catch(e){if(n)i=(yield r.getIndexedAccount({id:n})).name}return{accountName:i,networkName:(yield o.getNetwork({networkId:t})).name}})),[e,n,t]),k=w.A.isOthersAccount({accountId:e}),v=(0,o.useMemo)((function(){var e,n;return k?{title:d.formatMessage({id:m.ETranslations.wallet_unsupported_network_title},{network:null!=(n=h?.networkName)?n:""}),description:d.formatMessage({id:m.ETranslations.wallet_unsupported_network_desc})}:{title:d.formatMessage({id:m.ETranslations.wallet_no_address}),description:d.formatMessage({id:m.ETranslations.global_private_key_error},{network:null!=(e=h?.networkName)?e:"",path:p.A.isBTCNetwork(t)?"(Taproot)":""})}}),[h,k,t,d]);return h?(0,$.jsx)(a.Alert,{type:"warning",title:v.title,description:v.description,action:k?void 0:{primary:d.formatMessage({id:m.ETranslations.dapp_connect_create}),onPrimaryPress:function(){return x()},isPrimaryLoading:c}}):null}function ProtocolDetails({accountId:e,networkId:t,indexedAccountId:n,earnAccount:l,details:d,onClaim:c,onWithdraw:g,onPortfolioDetails:p,onCreateAddress:b,stakeButtonProps:f,withdrawButtonProps:x}){var h=(0,i.A)(),k=(0,o.useMemo)((function(){if(!d)return null;var e,t={validator:{name:d.provider.name,link:d.provider.website,isProtocol:"everstake"!==d.provider.name.toLowerCase()}};"everstake"===d.provider.name.toLowerCase()&&"eth"===d.token.info.name.toLowerCase()?e=h.formatMessage({id:m.ETranslations.earn_pending_activation_tooltip_eth}):d.pendingActivatePeriod&&(e=h.formatMessage({id:m.ETranslations.earn_pending_activation_tooltip},{number:d.pendingActivatePeriod}));var n={pendingInactive:d.pendingInactive,pendingInactivePeriod:d.unstakingPeriod?String(d.unstakingPeriod):void 0,pendingActive:d.pendingActive,pendingActiveTooltip:e,claimable:d.claimable,active:d.active,minClaimableNum:d.provider.minClaimableAmount,babylonOverflow:Number(d?.staked)-Number(d?.pendingInactive)&&Number(d.overflow)>0?d.overflow:void 0,token:d.token.info};d.provider.minStakeAmount&&(t.minOrMaxStaking={minValue:Number(d.provider.minStakeAmount),maxValue:Number(d.provider.maxStakeAmount),token:d.token.info.symbol}),d.provider.nextLaunchLeft&&(t.untilNextLaunch={value:Number(d.provider.nextLaunchLeft),token:d.token.info.symbol}),d.network&&(t.network=d.network);var r={apr:Number(d.provider?.apr)>0?d.provider.apr:void 0,earningsIn24h:d.earnings24h,rewardTokens:d.rewardToken,updateFrequency:d.updateFrequency};return{stakedValue:{value:Number(d.stakedFiatValue),stakedNumber:Number(d.staked),availableNumber:Number(d.available),tokenSymbol:d.token.info.symbol},portfolio:n,profit:r,provider:t}}),[d,h]),{result:j}=(0,u.yk)((0,r.A)((function*(){return d?s.A.serviceStaking.getFAQList({symbol:d.token.info.symbol,provider:d.provider.name}):Promise.resolve([])})),[d],{initResult:[]});if(!k)return null;var{stakedValue:v,portfolio:S,profit:y,provider:w}=k;return(0,$.jsxs)($.Fragment,{children:[l?.accountAddress?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(StakedValue,_objectSpread(_objectSpread({},v),{},{stakeButtonProps:f,withdrawButtonProps:x})),(0,$.jsx)(Portfolio,_objectSpread(_objectSpread({},S),{},{onClaim:c,onWithdraw:g,onPortfolioDetails:p}))]}):(0,$.jsx)(NoAddressWarning,{accountId:e,networkId:t,indexedAccountId:n,onCreateAddress:b}),(0,$.jsx)(a.Divider,{}),(0,$.jsx)(Profit,_objectSpread({},y)),(0,$.jsx)(a.Divider,{}),(0,$.jsx)(Provider,_objectSpread({},w)),(0,$.jsx)(a.Divider,{}),(0,$.jsx)(FAQ,{solutions:j})]})}var T=n(394764),P=n(153763),PendingIndicator=function({num:e,onPress:t}){var n=(0,i.A)();return(0,$.jsx)(a.Stack,{cursor:"pointer",children:(0,$.jsxs)(a.Badge,{badgeType:"info",badgeSize:"lg",onPress:t,children:[(0,$.jsx)(a.Stack,{borderRadius:"$full",p:3,bg:"$borderInfo",children:(0,$.jsx)(a.Stack,{w:"$1.5",h:"$1.5",borderRadius:"$full",bg:"$iconInfo"})}),(0,$.jsx)(a.Badge.Text,{pl:"$2",children:e>1?`${e} ${n.formatMessage({id:m.ETranslations.global_pending})} `:n.formatMessage({id:m.ETranslations.global_pending})})]})})},StakingActivityIndicator=function({num:e,onPress:t}){var n=(0,d.A)(),r=(0,o.useCallback)((function(){return e>0?(0,$.jsx)(PendingIndicator,{num:e,onPress:t}):t?(0,$.jsx)(a.IconButton,{variant:"tertiary",size:"medium",icon:"ClockTimeHistoryOutline",onPress:t}):null}),[e,t]);return(0,o.useEffect)((function(){n.setOptions({headerRight:r})}),[n,r,e]),null},StakingTransactionIndicator=function({accountId:e,networkId:t,stakeTag:n,onRefresh:i,onPress:a}){var{result:l,run:d}=(0,u.yk)((0,r.A)((function*(){return e?s.A.serviceStaking.fetchLocalStakingHistory({accountId:e,networkId:t,stakeTag:n}):[]})),[e,t,n],{initResult:[]}),c=l.length>0,m=(0,T.Z)(c),g=(0,P.E)();return(0,o.useEffect)((function(){g&&d()}),[g,d]),(0,o.useEffect)((function(){if(c){var n=setInterval((0,r.A)((function*(){e&&(yield s.A.serviceHistory.fetchAccountHistory({accountId:e,networkId:t})),yield d()})),15e3);return function(){return clearInterval(n)}}}),[c,e,t,d]),(0,o.useEffect)((function(){!c&&m&&i?.()}),[m,c,i]),(0,$.jsx)(StakingActivityIndicator,{num:l.length,onPress:a})},OverviewSkeletonItem=function(){return(0,$.jsxs)(a.YStack,{$md:{width:"50%"},$gtMd:{width:"25%"},mb:"$2",children:[(0,$.jsx)(a.Skeleton,{width:48,height:12}),(0,$.jsx)(a.Stack,{h:"$1"}),(0,$.jsx)(a.Skeleton,{width:100,height:12})]})},OverviewSkeleton=function(){return(0,$.jsxs)(a.Stack,{children:[(0,$.jsxs)(a.YStack,{children:[(0,$.jsx)(a.Skeleton,{width:100,height:16}),(0,$.jsx)(a.Stack,{h:"$4"}),(0,$.jsx)(a.Skeleton,{width:160,height:28}),(0,$.jsx)(a.Stack,{h:"$7"}),(0,$.jsx)(a.Skeleton,{width:120,height:12})]}),(0,$.jsxs)(a.YStack,{mt:"$16",children:[(0,$.jsx)(a.Skeleton,{width:60,height:12}),(0,$.jsxs)(a.XStack,{mt:"$5",children:[(0,$.jsxs)(a.YStack,{flex:1,children:[(0,$.jsx)(a.Skeleton,{width:48,height:12}),(0,$.jsx)(a.Stack,{h:"$1"}),(0,$.jsx)(a.Skeleton,{width:100,height:12})]}),(0,$.jsxs)(a.YStack,{flex:1,children:[(0,$.jsx)(a.Skeleton,{width:48,height:12}),(0,$.jsx)(a.Stack,{h:"$1"}),(0,$.jsx)(a.Skeleton,{width:100,height:12})]})]})]}),(0,$.jsxs)(a.Stack,{mt:"$16",flexDirection:"row",flexWrap:"wrap",children:[(0,$.jsx)(OverviewSkeletonItem,{}),(0,$.jsx)(OverviewSkeletonItem,{}),(0,$.jsx)(OverviewSkeletonItem,{}),(0,$.jsx)(OverviewSkeletonItem,{})]}),(0,$.jsxs)(a.Stack,{mt:"$16",children:[(0,$.jsx)(a.Skeleton,{width:60,height:12}),(0,$.jsxs)(a.YStack,{gap:"$5",mt:"$5",children:[(0,$.jsx)(a.Skeleton,{width:280,height:12}),(0,$.jsx)(a.Skeleton,{width:280,height:12}),(0,$.jsx)(a.Skeleton,{width:280,height:12})]})]})]})},ProtocolDetailsPage=function(){var e,t=(0,c.u)(),{accountId:n,networkId:l,indexedAccountId:b,symbol:x,provider:h}=t.params,k=(0,d.A)(),[j,v]=(0,o.useState)(!1),{result:S,run:y}=(0,u.yk)((0,r.A)((function*(){return s.A.serviceStaking.getEarnAccount({accountId:n,networkId:l,indexedAccountId:b})})),[n,b,l]),{result:w,isLoading:I,run:_}=(0,u.yk)((function(){return s.A.serviceStaking.getProtocolDetails({accountId:n,networkId:l,indexedAccountId:b,symbol:x,provider:h})}),[n,l,b,x,h],{watchLoading:!0}),T=(0,o.useCallback)((0,r.A)((function*(){yield y(),_()})),[y,_]),P=function(){var e,t=(0,d.A)();return(0,o.useCallback)((e=(0,r.A)((function*({details:e,accountId:n,networkId:r,symbol:o,provider:i,onSuccess:a}){if(e&&n){var l=yield s.A.serviceStaking.getStakingConfigs({networkId:r,symbol:o,provider:i});if(!l)throw new Error("Staking config not found");l.claimWithTx?t.push(g.Ax.ClaimOptions,{accountId:n,networkId:r,details:e,symbol:o,provider:i}):t.push(g.Ax.Claim,{accountId:n,networkId:r,details:e,onSuccess:a,amount:l.claimWithAmount?e.claimable:void 0})}})),function(t){return e.apply(this,arguments)}),[t])}(),M=function(){var e,t=(0,d.A)();return(0,o.useCallback)((e=(0,r.A)((function*({details:e,accountId:n,networkId:r,symbol:o,provider:i,onSuccess:a}){if(e&&n){var l=yield s.A.serviceStaking.getStakingConfigs({networkId:r,symbol:o,provider:i});if(!l)throw new Error("Staking config not found");l.withdrawWithTx?t.push(g.Ax.WithdrawOptions,{accountId:n,networkId:r,details:e,symbol:o,provider:i}):t.push(g.Ax.Withdraw,{accountId:n,networkId:r,details:e,onSuccess:a})}})),function(t){return e.apply(this,arguments)}),[t])}(),E=function(){var e,t=(0,d.A)();return(0,o.useCallback)((e=(0,r.A)((function*({details:e,accountId:n,networkId:r,setStakeLoading:o,onSuccess:i}){if(e&&n)if(e.approveTarget){o?.(!0);try{var{allowanceParsed:a}=yield s.A.serviceStaking.fetchTokenAllowance({accountId:n,networkId:r,spenderAddress:e.approveTarget,tokenAddress:e.token.info.address});t.push(g.Ax.ApproveBaseStake,{accountId:n,networkId:r,details:e,currentAllowance:a})}finally{o?.(!1)}}else t.push(g.Ax.Stake,{accountId:n,networkId:r,details:e,onSuccess:i})})),function(t){return e.apply(this,arguments)}),[t])}(),N=(0,o.useCallback)((0,r.A)((function*(){var e;yield E({details:w,accountId:S?.accountId,networkId:l,symbol:x,provider:h,setStakeLoading:v,onSuccess:(e=(0,r.A)((function*(){p.A.isBTCNetwork(l)&&(yield _())})),function onSuccess(){return e.apply(this,arguments)})})})),[w,S,l,E,v,x,h,_]),C=(0,o.useCallback)((0,r.A)((function*(){var e;yield M({details:w,accountId:S?.accountId,networkId:l,symbol:x,provider:h,onSuccess:(e=(0,r.A)((function*(){p.A.isBTCNetwork(l)&&(yield _())})),function onSuccess(){return e.apply(this,arguments)})})})),[M,w,S,l,x,h,_]),z=(0,o.useCallback)((0,r.A)((function*(){yield P({details:w,accountId:S?.accountId,networkId:l,symbol:x,provider:h})})),[P,w,S,l,x,h]),L=(0,o.useMemo)((function(){return p.A.isBTCNetwork(l)&&S?.accountId?function(){k.push(g.Ax.PortfolioDetails,{accountId:S?.accountId,networkId:l,symbol:x,provider:h})}:void 0}),[k,S?.accountId,l,x,h]),O=(0,o.useMemo)((function(){if(w?.earnHistoryEnable&&S?.accountId)return function(){k.navigate(g.Ax.HistoryList,{accountId:S?.accountId,networkId:l,symbol:x,provider:h})}}),[k,S?.accountId,l,x,h,w]),B=(0,i.A)(),D=(0,a.useMedia)(),Y=(0,o.useMemo)((function(){return{variant:"primary",loading:j,onPress:N,disabled:!S?.accountAddress}}),[j,S?.accountAddress,N]),R=(0,o.useMemo)((function(){return{onPress:C,disabled:!(S?.accountAddress&&Number(w?.active)>0)}}),[C,S?.accountAddress,w?.active]);return(0,$.jsxs)(a.Page,{scrollEnabled:!0,children:[(0,$.jsx)(a.Page.Header,{title:B.formatMessage({id:m.ETranslations.earn_earn_symbol},{symbol:x})}),(0,$.jsx)(a.Page.Body,{px:"$5",pb:"$5",gap:"$8",children:(0,$.jsxs)(f.bU,{LoadingSkeleton:OverviewSkeleton,loading:(0,f.am)({result:w,isLoading:I}),error:(0,f.o0)({result:w,isLoading:I}),onRefresh:_,children:[(0,$.jsx)(ProtocolDetails,{accountId:n,networkId:l,indexedAccountId:b,earnAccount:S,details:w,onClaim:z,onWithdraw:C,onPortfolioDetails:L,onCreateAddress:T,withdrawButtonProps:R,stakeButtonProps:Y}),D.gtMd?null:(0,$.jsx)(a.Page.Footer,{onConfirmText:B.formatMessage({id:m.ETranslations.earn_stake}),confirmButtonProps:Y,onCancelText:B.formatMessage({id:m.ETranslations.global_withdraw}),cancelButtonProps:R}),w?(0,$.jsx)(StakingTransactionIndicator,{accountId:null!=(e=S?.accountId)?e:"",networkId:l,stakeTag:(0,A.Y)(w),onRefresh:_,onPress:O}):null]})})]})};const M=function ProtocolDetailsPageWithProvider(){return(0,$.jsx)(l.b8,{config:{sceneName:b.Zs.home,sceneUrl:""},enabledNum:[0],children:(0,$.jsx)(ProtocolDetailsPage,{})})}},905817:(e,t,n)=>{n.d(t,{FZ:()=>countDecimalPlaces,Y:()=>buildLocalTxStatusSyncId,c:()=>capitalizeString});var buildLocalTxStatusSyncId=function(e){return`${e.provider.name.toLowerCase()}-${e.token.info.symbol.toLowerCase()}`};function capitalizeString(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function countDecimalPlaces(e){var t="string"==typeof e?Number(e):e;if(Number.isNaN(t))return 0;var n=t.toString(),r=n.indexOf(".");return-1===r?0:n.length-r-1}}}]);