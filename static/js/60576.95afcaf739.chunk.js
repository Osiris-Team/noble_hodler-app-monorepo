"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[60576],{326745:(e,r,n)=>{n.d(r,{u:()=>useAppRoute});var t=n(654266);function useAppRoute(){return(0,t.lq)()}},138584:(e,r,n)=>{n.d(r,{Py:()=>SimpleSpinnerSkeleton,am:()=>isLoadingState,bU:()=>PageFrame,o0:()=>isErrorState});var t=n(908867),i=n(490343),a=n(254491),o=n(831085),PageErrOccurred=function({onPress:e}){var r=(0,t.A)();return(0,o.jsx)(i.Empty,{icon:"ErrorOutline",title:r.formatMessage({id:a.ETranslations.global_an_error_occurred}),description:r.formatMessage({id:a.ETranslations.global_an_error_occurred_desc}),buttonProps:{onPress:e,children:r.formatMessage({id:a.ETranslations.global_refresh})}})},SimpleSpinnerSkeleton=function(){return(0,o.jsx)(i.Stack,{w:"100%",h:"$40",jc:"center",ai:"center",children:(0,o.jsx)(i.Spinner,{size:"large"})})},isLoadingState=function({result:e,isLoading:r}){return Boolean(void 0===e&&(void 0===r||!0===r))},isErrorState=function({result:e,isLoading:r}){return Boolean(void 0===e&&!1===r)},PageFrame=function({children:e,loading:r,LoadingSkeleton:n,error:t,onRefresh:i}){return r?n?(0,o.jsx)(n,{}):null:t?(0,o.jsx)(PageErrOccurred,{onPress:i}):(0,o.jsx)(o.Fragment,{children:e})}},960576:(e,r,n)=>{n.r(r),n.d(r,{default:()=>pages_AssetProtocolList});var t=n(514041),i=n(241440),a=n(908867),o=n(490343),s=n(610421),l=n(791088),d=n(391944),c=n(498356),u=n(326745),g=n(911998),x=n(259227),p=n(254491),f=n(392097),h=n(138584),k=n(905817),b=n(831085),AssetProtocolContent=function({providerTypes:e}){var r=(0,a.A)(),n=!0,t=!0;return e&&e.length>0&&(n=e.includes("native"),t=e.includes("liquid")),(0,b.jsx)(o.YStack,{flex:1,children:(0,b.jsx)(o.ScrollView,{maxHeight:560,children:(0,b.jsx)(o.YStack,{pb:"$5",children:(0,b.jsxs)(o.Stack,{children:[(0,b.jsx)(o.Stack,{w:"$14",h:"$14",jc:"center",ai:"center",bg:"$bgStrong",borderRadius:"$full",children:(0,b.jsx)(o.Icon,{name:"InfoCircleOutline",w:"$8",h:"$8"})}),(0,b.jsx)(o.YStack,{mt:"$5",children:(0,b.jsx)(o.SizableText,{size:"$headingXl",children:r.formatMessage({id:p.ETranslations.earn_staking_methods})})}),(0,b.jsxs)(o.YStack,{mt:"$5",gap:"$5",children:[n?(0,b.jsxs)(o.YStack,{gap:6,children:[(0,b.jsx)(o.SizableText,{size:"$bodyLgMedium",children:r.formatMessage({id:p.ETranslations.earn_what_is_native_staking})}),(0,b.jsx)(o.SizableText,{size:"$bodyMd",color:"$textSubdued",children:r.formatMessage({id:p.ETranslations.earn_what_is_native_staking_desc})})]}):null,t?(0,b.jsxs)(o.YStack,{gap:6,children:[(0,b.jsx)(o.SizableText,{size:"$bodyLgMedium",children:r.formatMessage({id:p.ETranslations.earn_what_is_liquid_staking})}),(0,b.jsx)(o.SizableText,{size:"$bodyMd",color:"$textSubdued",children:r.formatMessage({id:p.ETranslations.earn_what_is_liquid_staking_desc})})]}):null]})]})})})})};function StakeTypeBadge({stakeType:e,label:r}){var{bg:n,color:t}=function(e){switch(e){case"liquid":return{bg:"$purple3",color:"$purple11"};case"locked":return{bg:"$pink3",color:"$pink11"};default:return{bg:"$blue3",color:"$blue11"}}}(e);return(0,b.jsx)(o.Stack,{backgroundColor:n,borderRadius:"$1",borderCurve:"continuous",px:"$2",py:"$0.5",children:(0,b.jsx)(o.SizableText,{size:"$bodySmMedium",color:t,children:r})})}var AssetProtocolIntroButton=function({providerTypes:e}){var r=(0,a.A)(),n=(0,t.useCallback)((function(){o.Dialog.show({renderContent:(0,b.jsx)(AssetProtocolContent,{providerTypes:e}),showConfirmButton:!1,onCancelText:r.formatMessage({id:p.ETranslations.global_got_it})})}),[r,e]);return e&&e.length>0?(0,b.jsx)(o.IconButton,{icon:"InfoCircleOutline",variant:"tertiary",onPress:n}):null},ProviderTypeBadge=function({type:e}){var r=(0,a.A)();if(!e)return null;var n="native"===e?"locked":"liquid",t="native"===e?r.formatMessage({id:p.ETranslations.earn_native_staking}):r.formatMessage({id:p.ETranslations.earn_liquid_staking});return(0,b.jsx)(StakeTypeBadge,{stakeType:n,label:t})},ProviderStakingBadge=function({isStaking:e}){var r=(0,a.A)();return e?(0,b.jsx)(StakeTypeBadge,{stakeType:"default",label:r.formatMessage({id:p.ETranslations.earn_currently_staking})}):null},ProviderBadges=function({provider:e}){return e?.type||e?.isStaking?(0,b.jsxs)(o.XStack,{flexWrap:"wrap",gap:"$1",children:[(0,b.jsx)(ProviderTypeBadge,{type:e.type}),(0,b.jsx)(ProviderStakingBadge,{isStaking:e.isStaking})]}):null},AssetProtocolListContent=function({items:e}){var r=(0,u.u)(),{accountId:n,indexedAccountId:a,symbol:s}=r.params,g=(0,c.A)(),p=(0,t.useCallback)((function({item:e}){g.navigate(f.Ax.ProtocolDetails,{accountId:n,networkId:e.network.networkId,indexedAccountId:a,symbol:s.toUpperCase(),provider:e.provider.name})}),[g,n,a,s]),[{currencyInfo:{symbol:h}}]=(0,x.useSettingsPersistAtom)();return(0,b.jsx)(o.ListView,{estimatedItemSize:60,data:e,renderItem:function({item:e}){var r,n;return(0,b.jsxs)(l.c,{userSelect:"none",onPress:function(){return p?.({item:e})},children:[(0,b.jsx)(d.o,{size:"lg",borderRadius:"$2",tokenImageUri:e.provider.logoURI,networkImageUri:e.network.logoURI}),(0,b.jsx)(l.c.Text,{flex:1,primary:(0,k.c)(e.provider.name),secondary:(0,b.jsx)(ProviderBadges,{provider:e.provider})}),(0,b.jsx)(l.c.Text,{align:"right",primary:Number(e.provider.apr)>0?`${(0,i.A)(null!=(r=e.provider.apr)?r:0).toFixed(2)}%`:null,secondary:(0,b.jsx)(o.SizableText,{size:"$bodyMd",color:"$textSubdued",children:`TVL ${h}${n=Number(e.provider.totalFiatValue),n>=1e9?`${(n/1e9).toFixed(1).replace(/\.0$/,"")}B`:n>=1e6?`${(n/1e6).toFixed(1).replace(/\.0$/,"")}M`:n>=1e3?`${(n/1e3).toFixed(1).replace(/\.0$/,"")}K`:n.toFixed(2)}`})})]})}})},LoadingSkeleton=function(){return(0,b.jsx)(o.Stack,{children:Array.from({length:3}).map((function(e,r){return(0,b.jsxs)(l.c,{children:[(0,b.jsx)(o.Skeleton,{w:"$10",h:"$10",borderRadius:"$2"}),(0,b.jsxs)(o.YStack,{children:[(0,b.jsx)(o.YStack,{py:"$1",children:(0,b.jsx)(o.Skeleton,{h:"$4",w:120,borderRadius:"$2"})}),(0,b.jsx)(o.YStack,{py:"$1",children:(0,b.jsx)(o.Skeleton,{h:"$3",w:80,borderRadius:"$2"})})]})]},r)}))})};const pages_AssetProtocolList=function(){var e=(0,u.u)(),{filter:r,symbol:n,networkId:i,accountId:l,indexedAccountId:d}=e.params,{result:c,isLoading:x,run:f}=(0,g.yk)((function(){return s.A.serviceStaking.getProtocolList({symbol:n,accountId:l,indexedAccountId:d,networkId:i,filter:r})}),[r,n,i,l,d],{watchLoading:!0}),k=(0,a.A)(),m=(0,t.useCallback)((function(){return(0,b.jsx)(AssetProtocolIntroButton,{providerTypes:c?.map((function(e){return e.provider.type})).filter(Boolean)})}),[c]);return(0,b.jsxs)(o.Page,{scrollEnabled:!0,children:[(0,b.jsx)(o.Page.Header,{title:k.formatMessage({id:p.ETranslations.provider_title}),headerRight:m}),(0,b.jsx)(o.Page.Body,{children:(0,b.jsx)(h.bU,{LoadingSkeleton,loading:(0,h.am)({result:c,isLoading:x}),error:(0,h.o0)({result:c,isLoading:x}),onRefresh:f,children:(0,b.jsx)(o.Stack,{children:c?(0,b.jsx)(AssetProtocolListContent,{items:c}):null})})})]})}},905817:(e,r,n)=>{n.d(r,{FZ:()=>countDecimalPlaces,Y:()=>buildLocalTxStatusSyncId,c:()=>capitalizeString});var buildLocalTxStatusSyncId=function(e){return`${e.provider.name.toLowerCase()}-${e.token.info.symbol.toLowerCase()}`};function capitalizeString(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function countDecimalPlaces(e){var r="string"==typeof e?Number(e):e;if(Number.isNaN(r))return 0;var n=r.toString(),t=n.indexOf(".");return-1===t?0:n.length-t-1}}}]);